# Viteä¸–ç•ŒæŒ‡å—
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673495307441-5f64f722-7b1c-4c1f-85e4-97c5795f9d56.png#averageHue=%23a3b1ad&clientId=u85fdffde-7388-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=320&id=ub441009e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=640&originWidth=640&originalType=binary&ratio=1&rotation=0&showTitle=false&size=146204&status=done&style=none&taskId=u284d193a-932e-49e0-92e6-3bc2eb607da&title=&width=320)
**ä¸‹ä¸€ä»£çš„å‰ç«¯å·¥å…·é“¾**
# ä»€ä¹ˆæ˜¯æ„å»ºå·¥å…·
> æµè§ˆå™¨åªèƒ½è¯†åˆ«htmlï¼Œjsï¼Œcss

åœ¨äº†è§£æ„å»ºå·¥å…·ä¹‹å‰ï¼Œæˆ‘å…ˆä¸¾ä¸€ä¸ªä¼ä¸šçº§å¼€å‘ä¸­çš„é¡¹ç›®ä¸­å¯èƒ½ä¼šå…·å¤‡å“ªäº›åŠŸèƒ½ï¼š

1. TypeScriptï¼šå¦‚æœé‡åˆ°tsæ–‡ä»¶æˆ‘ä»¬éœ€è¦é€šè¿‡tscå‘½ä»¤æŠŠTypeScriptä»£ç è½¬æ¢ä¸ºJavaScriptä»£ç è®©æµè§ˆå™¨è®¤è¯†

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673496745434-7ff34c10-fd49-4643-95b6-d15752db30d2.png#averageHue=%23282c34&clientId=u85fdffde-7388-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=198&id=u73d115df&margin=%5Bobject%20Object%5D&name=image.png&originHeight=568&originWidth=688&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55291&status=done&style=none&taskId=ubd04e9c4-b42c-4f34-947e-8a2178e6675&title=&width=240)-`tsc index.ts`->![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673496856157-b28beb25-d433-4e87-9c90-ec09721b06f2.png#averageHue=%23282c34&clientId=u85fdffde-7388-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=196&id=u9e48d547&margin=%5Bobject%20Object%5D&name=image.png&originHeight=352&originWidth=500&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25733&status=done&style=none&taskId=u144307da-fe74-416a-ad9e-d9ffb6b2c9d&title=&width=278)

2. React/Vueï¼šå®‰è£…react-compiler / vue-complierï¼Œå°†æˆ‘ä»¬å†™çš„jsxæ–‡ä»¶æˆ–è€…vueæ–‡ä»¶è½¬æ¢ä¸ºrenderå‡½æ•°

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673497236118-57b98430-5679-4be5-ad92-61257359598d.png#averageHue=%23292e36&clientId=u85fdffde-7388-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=176&id=u88dea3f5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=406&originWidth=816&originalType=binary&ratio=1&rotation=0&showTitle=false&size=40584&status=done&style=none&taskId=ua20e2957-7c31-4837-b921-effca94bad3&title=&width=353)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673497250660-be487c2f-7558-42f6-913f-dc2c6e80b819.png#averageHue=%23292d36&clientId=u85fdffde-7388-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=149&id=u6b3027d6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=298&originWidth=1718&originalType=binary&ratio=1&rotation=0&showTitle=false&size=56770&status=done&style=none&taskId=uf014b9e6-c192-470a-be49-c0fb0378416&title=&width=859)

3. less/sass/postcss/component-styleï¼šæˆ‘ä»¬åˆéœ€è¦å®‰è£…less-loaderï¼Œsass-loaderç­‰ä¸€ç³»åˆ—ç¼–è¯‘å·¥å…·
4. è¯­æ³•é™çº§ï¼šbabel--> å°†esçš„æ–°è¯­æ³•è½¬æ¢ä¸ºæ—§ç‰ˆæµè§ˆå™¨å¯ä»¥è¯†åˆ«çš„è¯­æ³•ï¼Œæé«˜å…¼å®¹æ€§
5. ä½“ç§¯ä¼˜åŒ–ï¼šuglifyjs--> å°†æˆ‘ä»¬çš„ä»£ç è¿›è¡Œå‹ç¼©å˜ä¸ºä½“ç§¯æ›´å°æ€§èƒ½æ›´é«˜çš„æ–‡ä»¶ï¼ŒåŠ å¿«ç½‘è·¯ä¼ è¾“
6. ......
> ä¸Šé¢è¿™äº›åŠŸèƒ½æˆ‘ä»¬å‘ç°ï¼Œåªè¦ç¨å¾®è¯¥ä¸€ç‚¹ç‚¹ä¸œè¥¿ï¼Œå°±è¦é‡æ–°æ‰‹åŠ¨è¿›è¡Œè½¬æ¢ï¼Œ**éå¸¸éº»çƒ¦**
> å°†App.tsx--tsc-->App.jsx--ReactComplier-->jsæ–‡ä»¶
> å› æ­¤æˆ‘ä»¬å¸Œæœ›æœ‰ä¸€ä¸ªå·¥å…·èƒ½å¤Ÿå¸®æˆ‘ä»¬æŠŠtsï¼Œreact-compilerï¼Œlessï¼Œbabelï¼Œuglifyjså…¨éƒ¨é›†æˆåˆ°ä¸€èµ·
> è€Œæˆ‘ä»¬åªéœ€è¦å…³ç³»æˆ‘ä»¬å†™çš„ä»£ç å°±å¯ä»¥äº†ï¼Œæˆ‘ä»¬å†™çš„ä»£ç åªè¦ä¸€æ—¦å˜åŒ–ï¼Œå°±ä¼šæœ‰å·¥å…·å¸®æˆ‘ä»¬æŠŠtsï¼Œreact-compilerï¼Œlessï¼Œbabelï¼Œuglifyjså…¨éƒ¨æŒ¨ä¸ªèµ°ä¸€é
> è¿™ä¸ªå·¥å…·å°±å«åš**æ„å»ºå·¥å…·**



> æ‰“åŒ…ï¼šå°†æˆ‘ä»¬å†™çš„æµè§ˆå™¨ä¸è®¤è¯†çš„ä»£ç  äº¤ç»™æ„å»ºå·¥å…·è¿›è¡Œç¼–è¯‘å¤„ç†çš„è¿‡ç¨‹å°±å«åšæ‰“åŒ…ï¼Œæ‰“åŒ…å®Œæˆä¹‹åæˆ‘ä»¬ä¼šå¾—åˆ°ä¸€ä¸ªæµè§ˆå™¨è®¤è¯†çš„æ–‡ä»¶

é‚£ä¹ˆæ„å»ºå·¥å…·åˆ°åº•å¸®æˆ‘ä»¬æ‰¿æ‹…äº†å“ªäº›éº»çƒ¦çš„äº‹æƒ…

1. æ¨¡å—åŒ–å¼€å‘çš„æ”¯æŒï¼šæ”¯æŒç›´æ¥ä»node_modulesä¸­å¼•å…¥ä»£ç (ES6 module) + å¤šç§æ¨¡å—åŒ–çš„æ”¯æŒ(CommonJS)
2. å¤„ç†ä»£ç çš„å…¼å®¹æ€§ï¼šæ¯”å¦‚babelè¯­æ³•é™çº§ï¼Œlessï¼Œtsè¯­æ³•è½¬æ¢(**æ³¨æ„**ï¼šè¿™ä¸æ˜¯æ„å»ºå·¥å…·åšçš„ï¼Œæ„å»ºå·¥å…·åªæ˜¯å°†è¿™äº›è¯­æ³•å¯¹åº”çš„å¤„ç†å·¥å…·é›†æˆè¿›æ¥è‡ªåŠ¨åŒ–å¤„ç†)
3. æé«˜é¡¹ç›®æ€§èƒ½ï¼šå‹ç¼©æ–‡ä»¶ï¼Œ**ä»£ç åˆ†å‰²**
4. ä¼˜åŒ–å¼€å‘ä½“éªŒï¼š
- æ„å»ºå·¥å…·ä¼šå¸®æˆ‘ä»¬è‡ªåŠ¨ç›‘å¬æ–‡ä»¶çš„å˜åŒ–ï¼Œå½“æˆ‘ä»¬æ–‡ä»¶å˜åŒ–ï¼Œä»–å°±ä¼šè‡ªåŠ¨å¸®æˆ‘ä»¬è°ƒç”¨å¯¹åº”çš„é›†æˆå·¥å…·è¿›è¡Œæ‰“åŒ…ï¼Œç„¶åå†åœ¨æµè§ˆå™¨ä¸­é‡æ–°è¿è¡Œ(å³çƒ­æ›´æ–°ï¼Œhot replacement)
- å¼€å‘æœåŠ¡å™¨ï¼šè§£å†³è·¨åŸŸé—®é¢˜
> **æ„å»ºå·¥å…·ä»–å¯ä»¥è®©æˆ‘ä»¬ä¸ç”¨æ¯æ¬¡éƒ½å…³ç³»æˆ‘ä»¬çš„ä»£ç åœ¨æµè§ˆå™¨å¦‚ä½•è¿è¡Œï¼Œæˆ‘ä»¬åªéœ€è¦é¦–æ¬¡ç»™æ„å»ºå·¥å…·æä¾›ä¸€ä¸ªé…ç½®æ–‡ä»¶(ä¹Ÿä¸æ˜¯å¿…é¡»çš„ï¼Œä»–ä¼šæœ‰é»˜è®¤çš„é…ç½®)ï¼Œå†ä¸‹æ¬¡éœ€è¦æ›´æ–°çš„æ—¶å€™æˆ‘ä»¬å°±å¯ä»¥è°ƒç”¨ä¸€æ¬¡å‘½ä»¤å°±å¯ä»¥äº†ã€‚å¦‚æœæˆ‘ä»¬å†ç»“åˆçƒ­æ›´æ–°ï¼Œæˆ‘ä»¬å°±ä¸éœ€è¦ç®¡ç†ä»»ä½•ä¸œè¥¿äº†ï¼Œä»–ä¼šæ ¹æ®æ”¹å˜è‡ªåŠ¨æ›´æ–°ï¼Œæ‰€ä»¥å¾—ç›Šäºæ„å»ºå·¥å…· æˆ‘ä»¬ä¸éœ€è¦å…³å¿ƒç”Ÿäº§çš„ä»£ç ä¹Ÿä¸ç”¨å…³å¿ƒä»£ç åœ¨æµè§ˆå™¨æ€ä¹ˆè¿è¡Œï¼Œåªéœ€è¦å…³å¿ƒæˆ‘ä»¬å¼€å‘çš„æ—¶å€™æ€ä¹ˆå†™çš„èˆ’æœå°±å¥½äº†ã€‚**


> å¸‚é¢ä¸Šä¸»æµçš„æ„å»ºå·¥å…·
> - **webpack**
> - **vite**
> - parcel
> - esbuild
> - rollup
> - grunt
> - gulp

# Viteç›¸è¾ƒäºwebpackçš„ä¼˜åŠ¿
å½“æˆ‘ä»¬å¼€å§‹æ„å»ºè¶Šæ¥è¶Šå¤§å‹çš„åº”ç”¨æ—¶ï¼Œéœ€è¦å¤„ç†çš„ JavaScript ä»£ç é‡ä¹Ÿå‘ˆæŒ‡æ•°çº§å¢é•¿ã€‚åŒ…å«æ•°åƒä¸ªæ¨¡å—çš„å¤§å‹é¡¹ç›®ç›¸å½“æ™®éã€‚åŸºäº JavaScript å¼€å‘çš„å·¥å…·å°±ä¼šå¼€å§‹é‡åˆ°æ€§èƒ½ç“¶é¢ˆï¼šé€šå¸¸éœ€è¦å¾ˆé•¿æ—¶é—´ï¼ˆç”šè‡³æ˜¯å‡ åˆ†é’Ÿï¼ï¼‰æ‰èƒ½å¯åŠ¨å¼€å‘æœåŠ¡å™¨ï¼Œå³ä½¿ä½¿ç”¨æ¨¡å—çƒ­æ›¿æ¢ï¼ˆHMRï¼‰ï¼Œæ–‡ä»¶ä¿®æ”¹åçš„æ•ˆæœä¹Ÿéœ€è¦å‡ ç§’é’Ÿæ‰èƒ½åœ¨æµè§ˆå™¨ä¸­åæ˜ å‡ºæ¥ã€‚å¦‚æ­¤å¾ªç¯å¾€å¤ï¼Œè¿Ÿé’çš„åé¦ˆä¼šæå¤§åœ°å½±å“å¼€å‘è€…çš„å¼€å‘æ•ˆç‡å’Œå¹¸ç¦æ„Ÿã€‚
[https://cn.vitejs.dev/guide/why.html#the-problems](https://cn.vitejs.dev/guide/why.html#the-problems)
> é‚£ä¹ˆviteä¼šä¸ä¼šå–ä»£webpackï¼Ÿ
> ç­”æ¡ˆæ˜¯ä¸ä¼šï¼Œå› ä¸ºä»–ä»¬çš„ä¾§é‡ç‚¹ä¸ä¸€æ ·ï¼Œwebpackæ›´å…³æ³¨å…¼å®¹æ€§ï¼Œè€Œviteå…³æ³¨æµè§ˆå™¨ç«¯å¼€å‘çš„ä½“éªŒ

> å¯åŠ¨çš„åŒºåˆ«

webpack:
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673500943665-fc724df7-ee51-4122-9ea5-aff2a5ea750e.png#averageHue=%23eeecea&clientId=u85fdffde-7388-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=390&id=u3365ac3b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=780&originWidth=1358&originalType=binary&ratio=1&rotation=0&showTitle=false&size=58742&status=done&style=none&taskId=u48cb1577-4f03-4738-a175-aa5d528b4ff&title=&width=679)
vite:
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673500960698-ed9e3c3c-a86d-426a-82d2-949a1c80aaa7.png#averageHue=%23e3e2e1&clientId=u85fdffde-7388-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=386&id=ua9989b84&margin=%5Bobject%20Object%5D&name=image.png&originHeight=772&originWidth=1356&originalType=binary&ratio=1&rotation=0&showTitle=false&size=67278&status=done&style=none&taskId=ubced0ad2-e2e4-45d6-84cb-09dcca30466&title=&width=678)
# å¿…é¡»è¦ç†è§£çš„viteè„šæ‰‹æ¶å’Œvite
viteå®˜ç½‘æ­å»ºviteé¡¹ç›®æ–‡æ¡£æ•™ç¨‹: [https://vitejs.dev/guide/#scaffolding-your-first-vite-project](https://vitejs.dev/guide/#scaffolding-your-first-vite-project)
> æ¯”å¦‚æˆ‘ä»¬æ•²äº†`yarn create vite`
> 1. å¸®æˆ‘ä»¬å…¨å±€å®‰è£…ä¸€ä¸ªä¸œè¥¿: create-vite (viteçš„è„šæ‰‹æ¶)
> 2. ç›´æ¥è¿è¡Œè¿™ä¸ªcreate-vite binç›®å½•çš„ä¸‹çš„ä¸€ä¸ªæ‰§è¡Œé…ç½®

æˆ‘ä»¬ä¹‹å‰æ¥è§¦è¿‡vue-cli
> å¾ˆå¤šåŒå­¦å¯èƒ½å°±ä¼šå­˜åœ¨è¯¯åŒº: **è®¤ä¸ºå®˜ç½‘ä¸­ä½¿ç”¨å¯¹åº”yarn createæ„å»ºé¡¹ç›®çš„è¿‡ç¨‹ä¹Ÿæ˜¯viteåœ¨åšçš„äº‹æƒ…**

create-viteå’Œviteçš„å…³ç³»æ˜¯ä»€ä¹ˆå‘¢ï¼Ÿ ---- create-viteå†…ç½®äº†vite
ä½¿ç”¨vue-cli ä¼šå†…ç½®webpack
å…ˆå­¦ä¹ çš„å°±æ˜¯vite
æˆ‘ä»¬æš‚æ—¶ä¸ä¼šä½¿ç”¨yarn create vite my-vue-app --template vue
æˆ‘ä»¬vue-cli å¯ä»¥å’Œwebpackåˆ†çš„å¾ˆæ¸…æ¥šï¼Œå› ä¸ºè¿™ä¸¤ä¸ªæ ¹æœ¬å°±ä¸æ˜¯ä¸€ä¸ªå›¢é˜Ÿçš„
vite --> vueå›¢é˜Ÿçš„ create-vite ---> vueå›¢é˜Ÿ
**vueå›¢é˜Ÿå¸Œæœ›å¼±åŒ–viteçš„ä¸€ä¸ªå­˜åœ¨æ„Ÿï¼ˆå¸Œæœ›è®©æˆ‘ä»¬ç›´æ¥ä½¿ç”¨create viteæ„å»ºé¡¹ç›®æ–¹ä¾¿ä½¿ç”¨ï¼‰, ä½†æ˜¯æˆ‘ä»¬å»å­¦ä¹ çš„æ—¶å€™ä¸èƒ½å¼±åŒ–çš„**
é¢„è®¾: ä¹°æˆ¿å­ æ¯›å¯æˆ¿(æˆ‘ä»¬çš„å·¥ç¨‹) ä¹°æ²™å‘, åšè£…ä¿®, ä¿®å„ä¸ªå•æ‰€, åŸ‹çº¿ï¼›ç²¾è£…ä¿®çš„æˆ¿: æ­å»ºå¥½äº†
æˆ‘ä»¬è‡ªå·±æ­å»ºä¸€ä¸ªé¡¹ç›®: ä¸‹è½½vite, vue, post-css, less, babel
vue-cli/create-react-app(å¼€å‘å•†)ç»™æˆ‘ä»¬æä¾›å·²ç»ç²¾è£…ä¿®çš„æ¨¡æ¿: å¸®ä½ æŠŠreact/vueéƒ½ä¸‹å¥½äº†, åŒæ—¶ä»–è¿˜å¸®ä½ æŠŠé…ç½®è°ƒæ•´åˆ°äº†æœ€ä½³å®è·µ
create-vite(å¼€å‘å•†)ç»™ä½ ä¸€å¥—ç²¾è£…ä¿®æ¨¡æ¿(ç»™ä½ ä¸€å¥—é¢„è®¾): ä¸‹è½½vite, vue, post-css, less, babelå¥½äº†, å¹¶ä¸”ç»™ä½ åšå¥½äº†æœ€ä½³å®è·µçš„é…ç½®
> æ„å»ºå·¥å…·å’Œè„šæ‰‹æ¶çš„åŒºåˆ«å°±æ˜¯ï¼š_**è„šæ‰‹æ¶**_**å·¥å…·æ˜¯å»ºç«‹åœ¨ä¸€äº›**_**æ„å»ºå·¥å…·**_**ä¹‹ä¸Šçš„æŠ½è±¡ï¼Œæœ€ä¸»è¦çš„æ˜¯å¼€å‘æœåŠ¡å™¨/æ¨¡å—æ†ç»‘å™¨ï¼Œå®ƒä»¬æ¶ˆé™¤äº†é…ç½®å’Œä½¿ç”¨**_**æ„å»ºå·¥å…·**_**çš„éº»çƒ¦ã€‚**

# Viteå¯åŠ¨é¡¹ç›®çš„åˆä½“éªŒ
## problem
> é¦–å…ˆç”¨æ™®é€šçš„æ–¹å¼ç›´æ¥åˆ›å»ºindex.htmlå’Œmain.jså’Œcounter.jsï¼Œæˆ‘ä»¬åœ¨counter.jsä¸­å¼•å…¥lodashï¼Œåœ¨main.jsä¸­å¼•å…¥counter.jsåœ¨index.htmlä¸­é€šè¿‡ESçš„moduleæ–¹å¼ä½¿ç”¨scriptæ ‡ç­¾å¼•å…¥main.js

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673503181006-00b17608-973f-4c8d-958b-7ddd175dc1fb.png#averageHue=%2325282f&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=173&id=u1dd290cd&margin=%5Bobject%20Object%5D&name=image.png&originHeight=346&originWidth=532&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29087&status=done&style=none&taskId=u148266bd-107c-44ce-be0c-b3c98492904&title=&width=266)
> æ‰“å¼€index.htmlåå‘ç°å¼•å…¥lodashæŠ¥é”™ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673503220947-3286ce98-c8c4-4b3a-9a51-3ca40129e713.png#averageHue=%23fdeded&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=44&id=ue9a042e9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=88&originWidth=1740&originalType=binary&ratio=1&rotation=0&showTitle=false&size=12998&status=done&style=none&taskId=ub7a38f05-0d36-4957-910a-9ad8bd37531&title=&width=870)
> æ„æ€æ˜¯æµè§ˆå™¨é€šè¿‡moduleæ–¹å¼å¼•å…¥jsåªèƒ½é€šè¿‡ç›¸å¯¹è·¯å¾„ï¼Œè€Œä¸èƒ½ç›´æ¥å¼•å…¥node_moduleä¸­çš„ä¸œè¥¿(æµè§ˆå™¨ä¸çŸ¥é“node_module)
> 
> é‚£ä¸ºä»€ä¹ˆæµè§ˆå™¨ä¸å†å‘ä¸Šå»æŸ¥æ‰¾node_moduleæ–‡ä»¶å‘¢ï¼Ÿ
> å› ä¸ºæ¯é€šè¿‡ä¸€ä¸ªimportå¼•å…¥æ–‡ä»¶éƒ½æ˜¯ä¸€ä¸ªç½‘ç»œè¯·æ±‚èµ„æºï¼Œæ¯”å¦‚ä¸Šé¢ä¾‹å­ä¸­ï¼Œindex.htmlä¸­å¯¼å…¥äº†main.jsï¼Œmain.jsä¸­å¯¼å…¥äº†counter.jsï¼›åˆ™å½“å‰çš„ç½‘ç»œè¯·æ±‚å¦‚ä¸‹ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673503769206-0274288d-0672-4088-86c7-37d8aa470ef2.png#averageHue=%23fbfafa&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=151&id=u8cb7e1d6&margin=%5Bobject%20Object%5D&name=image.png&originHeight=302&originWidth=718&originalType=binary&ratio=1&rotation=0&showTitle=false&size=78679&status=done&style=none&taskId=ued2e2f4a-0168-4680-a0fd-6d5d007b4c4&title=&width=359)
> æ‰€ä»¥æµè§ˆå™¨**ä¸æ•¢å†**å‘ä¸Šå†æŸ¥æ‰¾node_module

## Viteç™»åœº
> **å¼€ç®±å³ç”¨ï¼ˆout of boxï¼‰ï¼šä½ ä¸éœ€è¦åšä»»ä½•é¢å¤–çš„é…ç½®å°±å¯ä»¥ä½¿ç”¨viteæ¥å¸®ä½ å¤„ç†æ„å»ºå·¥ä½œ**

1. ä½¿ç”¨`yarn add vite -D`åœ¨å¼€å‘ç¯å¢ƒå®‰è£…vite
2. åœ¨package.jsonä¸­æ·»åŠ è°ƒè¯•ä»£ç 
```json
"scripts": {
  "dev": "vite"
},
```

3. ä½¿ç”¨`yarn dev`å‘½ä»¤å¯åŠ¨é¡¹ç›®

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673504373217-beadf6d1-3262-4316-bff0-0345dc8d0299.png#averageHue=%2329313b&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=170&id=ub7c43161&margin=%5Bobject%20Object%5D&name=image.png&originHeight=340&originWidth=612&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34895&status=done&style=none&taskId=u19d2da3e-39f8-4d7c-9e37-d1be4801d46&title=&width=306)
> æ§åˆ¶å°å·²ç»ä¸ä¼šæŠ¥é”™äº†ï¼Œè¯´æ˜lodashå·²ç»æˆåŠŸå¼•å…¥ï¼Œè¾“å‡ºlodashæŸ¥çœ‹å¦‚ä¸‹
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673504472302-c59ea4a3-c17e-4f86-8b87-ab114a977904.png#averageHue=%23fefefe&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=159&id=ue2b58c11&margin=%5Bobject%20Object%5D&name=image.png&originHeight=318&originWidth=1102&originalType=binary&ratio=1&rotation=0&showTitle=false&size=41824&status=done&style=none&taskId=u712fa665-161b-4a06-ab3e-eb6556375b1&title=&width=551)

# Viteçš„é¢„åŠ è½½
å½“æˆ‘ä»¬å†™äº†ä¸‹é¢çš„ä»£ç 
```javascript
import _ from 'lodash'
```
viteåœ¨å¤„ç†è¿‡ç¨‹ä¸­å¦‚æœçœ‹åˆ°äº†æœ‰éç›¸å¯¹è·¯å¾„æˆ–è€…ç»å¯¹è·¯å¾„çš„å¼•ç”¨ï¼Œå®ƒåˆ™ä¼šå°è¯•å¼€å¯è·¯å¾„è¡¥å…¨ï¼Œè¡¥å…¨ç»“æœå¦‚ä¸‹
```javascript
import __vite__cjsImport0_lodash from "/node_modules/.vite/deps/lodash.js?v=d9ffc135"; 
const _ = __vite__cjsImport0_lodash.__esModule ? __vite__cjsImport0_lodash.default : __vite__cjsImport0_lodash
```
> æ‰¾å¯»ä¾èµ–çš„è¿‡ç¨‹æ˜¯è‡ªå½“å‰ç›®å½•ä¾æ¬¡å‘ä¸ŠæŸ¥æ‰¾çš„è¿‡ç¨‹ï¼Œç›´åˆ°æœå¯»åˆ°æ ¹ç›®å½•æˆ–è€…æœå¯»åˆ°å¯¹åº”çš„ä¾èµ–ä¸ºæ­¢ /user/node_modules/lodash

ç”Ÿäº§å’Œå¼€å‘
yarn dev ---> å¼€å‘ï¼ˆæ¯æ¬¡ä¾èµ–é¢„æ„å»ºæ‰€é‡æ–°æ„å»ºçš„ç›¸å¯¹è·¯å¾„éƒ½æ˜¯æ­£ç¡®çš„ï¼‰
ç”Ÿäº§ç¯å¢ƒviteä¼šå…¨æƒäº¤ç»™ä¸€ä¸ªå«åšrollupçš„åº“å®Œæˆç”Ÿäº§ç¯å¢ƒçš„æ‰“åŒ…ï¼ˆè·¯å¾„å°±æœ‰å¯èƒ½å‡ºç°é—®é¢˜ï¼‰
> ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ï¼Œå®é™…ä¸Šviteåœ¨è€ƒè™‘å¦å¤–ä¸€ä¸ªé—®é¢˜çš„æ—¶å€™å°±é¡ºä¾¿æŠŠè¿™ä¸ªé—®é¢˜è§£å†³äº†
> å°±æ˜¯CommonJSè§„èŒƒçš„å¯¼å‡º module.exports
> æœ‰çš„åŒ…æ˜¯é€šè¿‡CommonJSçš„è§„èŒƒå¯¼å‡ºçš„ æ¯”å¦‚axios

å› æ­¤viteæå‡ºäº†**ä¾èµ–é¢„æ„å»º**
## ä¾èµ–é¢„æ„å»º
> é¦–å…ˆviteä¼šæ‰¾åˆ°å¯¹åº”çš„ä¾èµ–ï¼Œç„¶åè°ƒç”¨esbuild(å¯¹jsè¯­æ³•è¿›è¡Œå¤„ç†çš„ä¸€ä¸ªåº“)ï¼Œå°†å…¶ä»–è§„èŒƒçš„ä»£ç è½¬æ¢ä¸ºESmoduleè§„èŒƒï¼Œç„¶åæ”¾åˆ°å½“å‰ç›®å½•ä¸‹çš„node_module/.vite/depsç›®å½•ä¸‹ï¼ŒåŒæ—¶å¯¹ESmoduleè§„èŒƒçš„å„ä¸ªæ¨¡å—è¿›è¡Œç»Ÿä¸€é›†æˆ
> 

```javascript
export default function a(){}
```
```javascript
export {default as a} from "./a.js"//è¿™ä¸ªæ¨¡å—å¯¼å…¥äº†å…¶ä»–çš„æ¨¡å—å¹¶æš´éœ²
```
viteé‡å†™å
```javascript
function a(){}
```
å®ƒè§£å†³äº†ä¸‰ä¸ªé—®é¢˜

1. ä¸åŒçš„ç¬¬ä¸‰æ–¹åŒ…ä¼šæœ‰ä¸åŒçš„å¯¼å‡ºæ ¼å¼ï¼ˆè¿™ä¸ªæ˜¯viteæ²¡æ³•çº¦æŸåˆ«äººçš„ï¼‰
2. å¯¹è·¯å¾„çš„å¤„ç†ä¸Šå¯ä»¥ç›´æ¥ä½¿ç”¨.vite/depsï¼Œæ–¹ä¾¿è·¯å¾„é‡å†™
3. è§£å†³äº†ç½‘ç»œå¤šåŒ…ä¼ è¾“çš„æ€§èƒ½é—®é¢˜(ä¹Ÿæ˜¯åŸç”ŸESmoduleè§„èŒƒä¸æ•¢æ”¯æŒnode_moduleçš„åŸå› ä¹‹ä¸€)ï¼Œæœ‰äº†ä¾èµ–é¢„æ„å»ºä¹‹åæ— è®ºå®ƒæœ‰å¤šå°‘é¢å¤–çš„exportå’Œimportï¼Œviteéƒ½å°½å¯èƒ½å°†ä»–ä»¬é›†æˆæœ€ååªå‰©ä¸‹ä¸€ä¸ªæˆ–è€…å‡ ä¸ªæ¨¡å—ï¼ï¼ï¼

æ¼”ç¤ºé—®é¢˜ä¸‰ï¼š

1. é¦–å…ˆå®‰è£…lodash-esç‰ˆæœ¬çš„lodash`yarn add lodash-es`ï¼Œè¯¥lodashä½¿ç”¨çš„æ˜¯ESmoduleçš„æ–¹å¼å¼•å…¥å¹¶å¯¼å‡ºçš„ï¼Œå¦‚ä¸‹éƒ¨åˆ†æºç å›¾ç‰‡ï¼š

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673507238207-4b7a3b35-ad08-4899-a6d0-8ae532cf9463.png#averageHue=%232a313b&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=492&id=uc6b8d0e9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=984&originWidth=1244&originalType=binary&ratio=1&rotation=0&showTitle=false&size=298537&status=done&style=none&taskId=u06ffc241-7680-4f88-a5ca-113df64e3a8&title=&width=622)

2. åœ¨counter.jsä¸­å¼•å…¥è¯¥åº“

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673507336280-b83da7ad-c325-4200-a4b6-929a148a3f5f.png#averageHue=%23282c34&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=95&id=u1699dd8a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=190&originWidth=838&originalType=binary&ratio=1&rotation=0&showTitle=false&size=20857&status=done&style=none&taskId=uf6f6a93f-19e5-491d-804e-f1ab91a74e2&title=&width=419)

3. å¯åŠ¨é¡¹ç›®æ‰“å¼€æ§åˆ¶å°çš„ç½‘ç»œè¯·æ±‚é¢æ¿

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673507411861-4412595c-038c-4b3e-bf66-728da1b24df0.png#averageHue=%23f8f7f4&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=248&id=uf32d35b3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=496&originWidth=1120&originalType=binary&ratio=1&rotation=0&showTitle=false&size=190705&status=done&style=none&taskId=u2cd702f9-c884-4138-9e5a-df71e7993cb&title=&width=560)
> æˆ‘ä»¬å‘ç°è¿™ä¸ªæ¨¡å—é€šè¿‡ESmoduleå¼•å…¥çš„å¾ˆå¤šæ¨¡å—å¹¶æ²¡æœ‰å‡ºç°åœ¨ç½‘ç»œè¯·æ±‚ä¸­ï¼Œè¯´æ˜viteè§£å†³äº†ç½‘ç»œå¤šåŒ…ä¼ è¾“çš„é—®é¢˜ï¼ï¼æŸ¥çœ‹è¯¥è¯·æ±‚é¢„è§ˆï¼šå‘ç°å¼•å…¥éƒ½å˜æˆäº†å‡½æ•°çš„å½¢å¼
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673508288810-ce7fdc85-e906-4840-8f50-9709762afdee.png#averageHue=%23fcfcfc&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=646&id=u8497f85e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1292&originWidth=1120&originalType=binary&ratio=1&rotation=0&showTitle=false&size=353384&status=done&style=none&taskId=u20b8761d-7f0c-4e0a-81e8-52e2bef47cd&title=&width=560)


ä¸ºäº†éªŒè¯ç½‘ç»œå¤šåŒ…ä¼ è¾“é—®é¢˜çš„ä¸¥é‡æ€§ï¼Œæˆ‘ä»¬å¯ä»¥é€šè¿‡ä¿®æ”¹viteé…ç½®æ–‡ä»¶æ¥è¿›è¡Œæ¼”ç¤ºï¼š
> 1. åˆ›å»ºvite.config.js æ·»åŠ å¦‚ä¸‹é…ç½®
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673507871038-12e00faf-010d-4fa4-b72d-0cb76c88372a.png#averageHue=%23292d35&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=203&id=ub51887ac&margin=%5Bobject%20Object%5D&name=image.png&originHeight=406&originWidth=1558&originalType=binary&ratio=1&rotation=0&showTitle=false&size=65291&status=done&style=none&taskId=u4f79ea27-f0e2-450b-b685-39514920d1d&title=&width=779)
> 2. ç»§ç»­æ‰“å¼€ç½‘ç»œè¯·æ±‚é¢æ¿å‘ç°ï¼šæ€»å…±æœ‰648ä¸ªè¯·æ±‚ï¼ï¼ï¼
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673507941018-b400a0b3-71bd-4c9d-8284-9e07bb940a26.png#averageHue=%23f8f8f7&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=648&id=uf25d998c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1296&originWidth=1118&originalType=binary&ratio=1&rotation=0&showTitle=false&size=385625&status=done&style=none&taskId=u518a78f1-aa44-4632-a9a0-1021a1d95a8&title=&width=559)
> 3. æ‰“å¼€æˆ‘ä»¬å¼•å…¥çš„lodashèµ„æºçš„è¯·æ±‚ï¼šå’ŒåŸæ¥ä¸€æ ·ï¼Œå³æœªè¿›è¡Œä¾èµ–é¢„æ„å»º
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673508005660-1cc0e764-1388-4da0-b1d5-00624da768af.png#averageHue=%23f8efee&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=649&id=u01a00d06&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1298&originWidth=1122&originalType=binary&ratio=1&rotation=0&showTitle=false&size=635314&status=done&style=none&taskId=u938469d8-e43a-40ec-bf89-aa865aec022&title=&width=561)
> å¯è§æ²¡æœ‰ä¾èµ–é¢„æ„å»ºçš„ææ€–ğŸ˜±æ€§

# Viteé…ç½®æ–‡ä»¶å¤„ç†ç»†èŠ‚
## é…ç½®æ–‡ä»¶çš„è¯­æ³•æç¤º
> åœ¨vite.config.jsä¸­ä¹¦å†™å†…å®¹æˆ‘ä»¬å‘ç°ï¼Œæ²¡æœ‰è¯­æ³•æç¤º
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673508820680-afe4ec29-0c82-4498-a015-1b5eee0ad8b0.png#averageHue=%232b2f36&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=457&id=ua2715a6b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=914&originWidth=1770&originalType=binary&ratio=1&rotation=0&showTitle=false&size=224741&status=done&style=none&taskId=u4f43702e-f088-4e57-a5aa-0cb08d90b33&title=&width=885)
> æˆ‘ä»¬å¯ä»¥é€šè¿‡å¼•å…¥viteä¸­çš„defineConfigå‡½æ•°è§£å†³
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673508926827-d96fd0c8-9af0-40f4-b11a-c4eb5af46844.png#averageHue=%232a2f37&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=330&id=ub9d361d5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=660&originWidth=1644&originalType=binary&ratio=1&rotation=0&showTitle=false&size=147760&status=done&style=none&taskId=uf2aec793-fe70-42fc-b611-aebe9f37eeb&title=&width=822)
> åœ¨defineConfigå‡½æ•°å†…éƒ¨ä¼ å…¥é…ç½®é¡¹å³å¯è§£å†³


> æˆ–è€…ä½¿ç”¨æ³¨é‡Šçš„æ–¹å¼ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673509280329-175afaa9-0634-4283-93df-bafd3658dff0.png#averageHue=%23292d36&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=260&id=uff7315ea&margin=%5Bobject%20Object%5D&name=image.png&originHeight=520&originWidth=1298&originalType=binary&ratio=1&rotation=0&showTitle=false&size=73175&status=done&style=none&taskId=u9361db03-9d83-4180-b30e-9b7a3453ce2&title=&width=649)
> ç®€å†™ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673509339939-6a88264c-6ef8-40df-80c6-fb016c525a9e.png#averageHue=%23292e36&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=180&id=ua7ac054a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=360&originWidth=1076&originalType=binary&ratio=1&rotation=0&showTitle=false&size=44582&status=done&style=none&taskId=ub22fbcd7-4014-485d-82d1-0ad7931a7fd&title=&width=538)


## å…³äºç¯å¢ƒçš„å¤„ç†
> è¿‡å»æˆ‘ä»¬ä½¿ç”¨webpackçš„æ—¶å€™ï¼Œæˆ‘ä»¬éœ€è¦åŒºåˆ†é…ç½®æ–‡ä»¶çš„ä¸€ä¸ªç¯å¢ƒ
> - webpack.dev.config
> - webpack.prod.config
> - webpack.base.config
> - webpackmerge

viteçš„ç¯å¢ƒé…ç½®
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673510791587-34e97da9-d811-4078-888a-6a9b2226994a.png#averageHue=%23292e36&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=284&id=u6b63777b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=568&originWidth=904&originalType=binary&ratio=1&rotation=0&showTitle=false&size=71285&status=done&style=none&taskId=ua0c7fa68-d961-45b5-b692-59d3c14add3&title=&width=452)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673510817709-bac32f4a-c700-4a00-935f-51eef4f681f0.png#averageHue=%23292e36&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=230&id=udbd00b60&margin=%5Bobject%20Object%5D&name=image.png&originHeight=460&originWidth=904&originalType=binary&ratio=1&rotation=0&showTitle=false&size=57054&status=done&style=none&taskId=uf5fe131c-7451-4640-a9b9-e2d6434e24e&title=&width=452)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673510851914-622a3205-c24e-40c5-91f6-ef40ec4ca402.png#averageHue=%23292e36&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=230&id=uf443be8a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=460&originWidth=904&originalType=binary&ratio=1&rotation=0&showTitle=false&size=57278&status=done&style=none&taskId=ucd404d49-37fc-49c0-b0f1-b72216056eb&title=&width=452)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673510872996-a0046606-3923-4726-858f-5eb858780042.png#averageHue=%23292d35&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=716&id=udc3c6b64&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1432&originWidth=1352&originalType=binary&ratio=1&rotation=0&showTitle=false&size=270219&status=done&style=none&taskId=u09da00bd-22b0-4add-bfda-9bde8b3da46&title=&width=676)
> åˆ°åº•æ˜¯ç”Ÿäº§ç¯å¢ƒè¿˜æ˜¯å¼€å‘ç¯å¢ƒå–å†³äºæ‰§è¡Œçš„å‘½ä»¤

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673511020119-2d752dab-078e-4372-9092-30b7729ed592.png#averageHue=%23282d36&clientId=u8028b30c-84d7-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=714&id=u8d5767c3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1428&originWidth=1866&originalType=binary&ratio=1&rotation=0&showTitle=false&size=450136&status=done&style=none&taskId=u6f3b6557-0dad-42a0-8863-4d68dfebb03&title=&width=933)
# viteç¯å¢ƒå˜é‡é…ç½®
ç¯å¢ƒå˜é‡: ä¼šæ ¹æ®å½“å‰çš„**ä»£ç ç¯å¢ƒ**äº§ç”Ÿå€¼çš„å˜åŒ–çš„å˜é‡å°±å«åšç¯å¢ƒå˜é‡
ä»£ç ç¯å¢ƒ:

1. å¼€å‘ç¯å¢ƒ
2. æµ‹è¯•ç¯å¢ƒ
3. é¢„å‘å¸ƒç¯å¢ƒ
4. ç°åº¦ç¯å¢ƒ
5. ç”Ÿäº§ç¯å¢ƒ
6. ......

ä¸¾ä¸¤ä¸ªä¾‹å­: 
> ç™¾åº¦åœ°å›¾çš„sdk, å°ç¨‹åºçš„sdk
> APP_KEY: æµ‹è¯•ç¯å¢ƒå’Œç”Ÿäº§è¿˜æœ‰å¼€å‘ç¯å¢ƒæ˜¯ä¸ä¸€æ ·çš„key
> - å¼€å‘ç¯å¢ƒ: 110
> - ç”Ÿäº§ç¯å¢ƒ: 111
> - æµ‹è¯•ç¯å¢ƒ: 112
> 
æˆ‘ä»¬å»è¯·æ±‚ç¬¬ä¸‰æ–¹sdkæ¥å£çš„æ—¶å€™éœ€è¦å¸¦ä¸Šçš„ä¸€ä¸ªèº«ä»½ä¿¡æ¯

> æˆ‘ä»¬åœ¨å’Œåç«¯å¯¹æ¥çš„æ—¶å€™, å‰ç«¯åœ¨å¼€å‘ç¯å¢ƒä¸­è¯·æ±‚çš„åç«¯APIåœ°å€å’Œç”Ÿäº§ç¯å¢ƒçš„åç«¯APIåœ°å€æ˜¯ä¸€ä¸ªå—ï¼Ÿ 
> è‚¯å®šä¸æ˜¯åŒä¸€ä¸ª
> - å¼€å‘å’Œæµ‹è¯•: [http://test.api](http://test.api/)
> - ç”Ÿäº§: [https://prod.api](https://api/)

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673515449095-2bb61290-f9b3-4ed7-96ea-b67d1799cf19.png#averageHue=%232a2f37&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=419&id=u691acd3b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=838&originWidth=962&originalType=binary&ratio=1&rotation=0&showTitle=false&size=126399&status=done&style=none&taskId=ua257cd6a-1193-489d-9e9d-8f3261dc704&title=&width=481)
> åœ¨è¿™äº›ç¯å¢ƒå‘ç”Ÿå˜åŒ–çš„æ—¶å€™ï¼Œæˆ‘ä»¬æ¯æ¬¡éƒ½éœ€è¦è¿›è¡Œæ‰‹åŠ¨çš„æ›´æ”¹ä»£ç ï¼Œä¸‡ä¸€æœ‰ä¸€æ¬¡æ²¡æœ‰æ”¹é…ç½®ï¼Œæˆ–è€…é…ç½®é”™äº†ï¼Œé—®é¢˜å¯æƒ³è€ŒçŸ¥

## åœ¨viteä¸­çš„ç¯å¢ƒå˜é‡å¤„ç†
> viteå†…ç½®äº†`dotenv`è¿™ä¸ªç¬¬ä¸‰æ–¹åº“

dotenvä¼šè‡ªåŠ¨è¯»å–.envæ–‡ä»¶, å¹¶è§£æè¿™ä¸ªæ–‡ä»¶ä¸­çš„å¯¹åº”ç¯å¢ƒå˜é‡ï¼Œå¹¶å°†å…¶æ³¨å…¥åˆ°process(å½“å‰è¿›ç¨‹å¯¹è±¡)å¯¹è±¡ä¸‹(ä½†æ˜¯viteè€ƒè™‘åˆ°å’Œå…¶ä»–é…ç½®çš„ä¸€äº›å†²çªé—®é¢˜, ä»–ä¸ä¼šç›´æ¥æ³¨å…¥åˆ°processå¯¹è±¡ä¸‹)
æ¶‰åŠåˆ°vite.config.jsä¸­çš„ä¸€äº›é…ç½®:

- root
- envDir: ç”¨æ¥é…ç½®å½“å‰ç¯å¢ƒå˜é‡çš„æ–‡ä»¶åœ°å€
> ä½†æ˜¯æˆ‘ä»¬å…ˆä¸è€ƒè™‘æ”¹å˜è¿™ä¸¤ä¸ªé…ç½®


**viteç»™æˆ‘ä»¬æä¾›äº†ä¸€äº›è¡¥å¿æªæ–½:**
æˆ‘ä»¬å¯ä»¥è°ƒç”¨viteçš„`**loadEnv**`æ¥æ‰‹åŠ¨ç¡®è®¤envæ–‡ä»¶
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673516385311-b6dff111-92d7-4e72-bcc7-5e9af17847df.png#averageHue=%23292d35&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=662&id=uee7e161e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1324&originWidth=1352&originalType=binary&ratio=1&rotation=0&showTitle=false&size=282159&status=done&style=none&taskId=u1f13cc0e-3a45-49b4-936d-481c94aac7a&title=&width=676)
> å‚æ•°ä¸€modeï¼š
> yarn dev --mode development ä¼šå°†modeè®¾ç½®ä¸ºdevelopmentä¼ é€’è¿›æ¥ï¼Œ
> é»˜è®¤æ‰§è¡Œyarn vite ï¼Œmodeå°±æ˜¯developmentï¼›
> æ‰§è¡Œyarn vite buildï¼Œmodeå°±æ˜¯productionã€‚
> process.cwd()æ–¹æ³•: è¿”å›å½“å‰nodeè¿›ç¨‹çš„å·¥ä½œç›®å½•
> é€šè¿‡loadEnvåŠ è½½ç¯å¢ƒå˜é‡è¿”å›çš„envè¾“å‡ºç»“æœä¸­ï¼Œæˆ‘ä»¬å¯ä»¥è§‚å¯Ÿåˆ°ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673516466814-81f13814-6605-4f86-92c2-08ea9c2ee179.png#averageHue=%23293039&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=131&id=ud27a5b24&margin=%5Bobject%20Object%5D&name=image.png&originHeight=262&originWidth=1068&originalType=binary&ratio=1&rotation=0&showTitle=false&size=73282&status=done&style=none&taskId=u0a9f96c6-beba-4427-8286-4b8701e6020&title=&width=534)
> æˆ‘ä»¬é€šè¿‡
> **.env: æ‰€æœ‰ç¯å¢ƒéƒ½éœ€è¦ç”¨åˆ°çš„ç¯å¢ƒå˜é‡**
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673516511556-e45bf5a6-3b2e-441c-8554-b7fb5a6c7663.png#averageHue=%232c3038&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=85&id=u470b77b1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=170&originWidth=564&originalType=binary&ratio=1&rotation=0&showTitle=false&size=16751&status=done&style=none&taskId=u7e317b2e-bfd4-42ed-9264-fa49f596a0a&title=&width=282)
> **.env.development: å¼€å‘ç¯å¢ƒéœ€è¦ç”¨åˆ°çš„ç¯å¢ƒå˜é‡(é»˜è®¤æƒ…å†µä¸‹viteå°†æˆ‘ä»¬çš„å¼€å‘ç¯å¢ƒå–åä¸ºdevelopment) **
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673516522914-52336085-9ab6-44b7-836c-68ffe5ff0d20.png#averageHue=%232d313a&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=103&id=u054c0838&margin=%5Bobject%20Object%5D&name=image.png&originHeight=206&originWidth=726&originalType=binary&ratio=1&rotation=0&showTitle=false&size=26570&status=done&style=none&taskId=u63b2a273-d69f-45c9-8e6c-42893554292&title=&width=363)
> **.env.testï¼šæµ‹è¯•ç¯å¢ƒéœ€è¦ç”¨åˆ°çš„ç¯å¢ƒå˜é‡(å¯åŠ¨éœ€è¦é…ç½®modeï¼Œä½¿ç”¨**`**yarn vite --mode test**`**å¯åŠ¨é¡¹ç›®ï¼Œæˆ–è€…é…ç½®package.jsonä¸­çš„script)**
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673523810198-81af254c-052e-45ac-a71f-19395e088e77.png#averageHue=%230e0d0c&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=103&id=u43f6a797&margin=%5Bobject%20Object%5D&name=image.png&originHeight=206&originWidth=624&originalType=binary&ratio=1&rotation=0&showTitle=false&size=22435&status=done&style=none&taskId=u2beb4e3c-7d78-48b0-a4ba-5e65abe8ec5&title=&width=312)
> **.env.production: ç”Ÿäº§ç¯å¢ƒéœ€è¦ç”¨åˆ°çš„ç¯å¢ƒå˜é‡(é»˜è®¤æƒ…å†µä¸‹viteå°†æˆ‘ä»¬çš„ç”Ÿäº§ç¯å¢ƒå–åä¸ºproduction)**
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673516569569-47df4c17-1bde-426f-aab8-58fa04f793ed.png#averageHue=%232d313a&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=103&id=u810e69a8&margin=%5Bobject%20Object%5D&name=image.png&originHeight=206&originWidth=700&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25915&status=done&style=none&taskId=u269ceed3-36a1-4a02-b939-4a642709593&title=&width=350)


å½“æˆ‘ä»¬è°ƒç”¨loadenvçš„æ—¶å€™, ä»–ä¼šåšå¦‚ä¸‹å‡ ä»¶äº‹:

1. ç›´æ¥æ ¹æ®è·¯å¾„æ‰¾åˆ°è¯¥è·¯å¾„ä¸‹çš„`.env`æ–‡ä»¶ï¼Œ å¹¶è§£æå…¶ä¸­çš„ç¯å¢ƒå˜é‡ å¹¶æ”¾è¿›ä¸€ä¸ªå¯¹è±¡é‡Œ
2. ä¼šå°†ä¼ è¿›æ¥çš„modeè¿™ä¸ªå˜é‡çš„å€¼è¿›è¡Œæ‹¼æ¥:` **.env.development**`ï¼Œå¹¶æ ¹æ®æˆ‘ä»¬æä¾›çš„ç›®å½•å»å–å¯¹åº”çš„é…ç½®æ–‡ä»¶å¹¶è¿›è¡Œè§£æ, å¹¶æ”¾è¿›ä¸€ä¸ªå¯¹è±¡
3. æˆ‘ä»¬å¯ä»¥ç†è§£ä¸º 
```javascript
const baseEnvConfig = è¯»å–.envçš„é…ç½®  
const modeEnvConfig = è¯»å–envç›¸å…³é…ç½®  
const lastEnvConfig = { ...baseEnvConfig, ...modeEnvConfig }
```
> **å¦‚æœæ˜¯å®¢æˆ·ç«¯, viteä¼šå°†å¯¹åº”çš„ç¯å¢ƒå˜é‡æ³¨å…¥åˆ°**`**import.meta.env**`**é‡Œå»**

> åœ¨request.jsä¸­è¾“å‡º
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673523340151-441f0cca-574d-45ff-92b1-42cb0f795970.png#averageHue=%23060504&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=95&id=u39980dd7&margin=%5Bobject%20Object%5D&name=image.png&originHeight=190&originWidth=1248&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35108&status=done&style=none&taskId=u2adef5cf-2631-478f-887e-455c93b6972&title=&width=624)
> å¹¶åœ¨index.jsä¸­å¼•å…¥å¯åŠ¨é¡¹ç›®ï¼Œæ‰“å¼€æ§åˆ¶å°å‘ç°ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673523418556-ec5d97c2-134f-480c-8264-7be5462d02a4.png#averageHue=%2325272b&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=119&id=u5ba76dc8&margin=%5Bobject%20Object%5D&name=image.png&originHeight=238&originWidth=1118&originalType=binary&ratio=1&rotation=0&showTitle=false&size=79285&status=done&style=none&taskId=u012c7534-adfe-4460-9569-5fa505dda17&title=&width=559)
> **è¯¥envå¯¹è±¡ä¸­å¹¶æ²¡æœ‰æˆ‘ä»¬é…ç½®çš„ç¯å¢ƒå˜é‡å±æ€§ï¼Ÿï¼Ÿï¼!**
> **è¿™æ˜¯å› ä¸ºviteåšäº†ä¸€ä¸ªæ‹¦æˆª, ä»–ä¸ºäº†é˜²æ­¢æˆ‘ä»¬å°†éšç§æ€§çš„å˜é‡ç›´æ¥é€è¿›**`**import.meta.env**`**ä¸­, æ‰€ä»¥ä»–åšäº†ä¸€å±‚æ‹¦æˆª, å¦‚æœä½ çš„ç¯å¢ƒå˜é‡ä¸æ˜¯ä»¥**`**VITE_**`**å¼€å¤´çš„, ä»–å°±ä¸ä¼šå¸®ä½ æ³¨å…¥åˆ°å®¢æˆ·ç«¯ä¸­å», å¦‚æœæˆ‘ä»¬æƒ³è¦æ›´æ”¹è¿™ä¸ªå‰ç¼€, å¯ä»¥å»ä½¿ç”¨**`**envPrefix**`**é…ç½®**
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673523530127-a5390ce7-3212-4ff1-8fcc-05a01537dbc9.png#averageHue=%23040303&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=311&id=u23d2c248&margin=%5Bobject%20Object%5D&name=image.png&originHeight=622&originWidth=904&originalType=binary&ratio=1&rotation=0&showTitle=false&size=79216&status=done&style=none&taskId=ueeecfb28-09ff-4e26-8987-acc79f3ded2&title=&width=452)


> ## è¡¥å……ä¸€ä¸ªå°çŸ¥è¯†: ä¸ºä»€ä¹ˆvite.config.jså¯ä»¥ä¹¦å†™æˆesmoduleçš„å½¢å¼?
> è¿™æ˜¯å› ä¸ºviteä»–åœ¨è¯»å–è¿™ä¸ªvite.config.jsçš„æ—¶å€™ä¼šç‡å…ˆnodeå»è§£ææ–‡ä»¶è¯­æ³•, å¦‚æœå‘ç°ä½ æ˜¯ESmoduleè§„èŒƒä¼šç›´æ¥å°†ä½ çš„esmoduleè§„èŒƒè¿›è¡Œæ›¿æ¢å˜æˆCommonJSè§„èŒƒ

# Viteæ˜¯æ€ä¹ˆè®©æµè§ˆå™¨è¯†åˆ«.vueæ–‡ä»¶çš„ï¼Ÿ[åŸç†ç¯‡]
## é¦–å…ˆåŒºåˆ†è¿™ä¸¤ä¸ªå‘½ä»¤
`yarn add vite`
å’Œ
`yarn create vite my-vue-app --template vue`
> yarn create å®é™…ä¸Šå°±æ˜¯åœ¨å®‰è£…create-viteè„šæ‰‹æ¶ ç„¶åä½¿ç”¨è„šæ‰‹æ¶çš„æŒ‡ä»¤æ„å»ºé¡¹ç›®

**æˆ‘ä»¬ç°åœ¨æ‰§è¡Œä¸€ä¸‹**`**yarn create vite my-vue-app --template vue**`**è¯¥å‘½ä»¤,**
**æ‰§è¡Œå®Œæ¯•åå†æ‰§è¡Œ**`**cd my-vue-app**`**å’Œ**`**yarn**`**(å®‰è£…ä¾èµ–)å’Œ**`**yarn dev**`**å¯åŠ¨é¡¹ç›®ã€‚**
> **æˆ‘ä»¬æ‰“å¼€æ§åˆ¶é¢æ¿æŸ¥çœ‹ç½‘ç»œè¯·æ±‚éƒ¨åˆ†ï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªå¥‡æ€ªçš„è¯·æ±‚**`**App.vue**`
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673525379500-c1dc5779-144d-4473-be85-378853a9932e.png#averageHue=%2324262a&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=651&id=u5603c4f9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1302&originWidth=1124&originalType=binary&ratio=1&rotation=0&showTitle=false&size=285373&status=done&style=none&taskId=u947bcdf1-a505-4c4f-96e1-5e5d4fa8e8f&title=&width=562)
> **ç‚¹å¼€å‘ç°æ˜¯jsæ–‡ä»¶ï¼Œé‚£ä¹ˆè¿™ä¸ªæ–‡ä»¶æ˜¯æ€ä¹ˆè¢«æµè§ˆå™¨è§£æçš„å‘¢ï¼Ÿæµè§ˆå™¨æ˜¯æ€ä¹ˆè®¤è¯†**`**.vue**`**æ–‡ä»¶çš„å‘¢ï¼Ÿ**

**æˆ‘ä»¬æ¥å®ç°ä¸€å¥—ç®€å•çš„Viteçš„å¼€å‘æœåŠ¡å™¨**

1. **è§£å†³æˆ‘ä»¬åˆšåˆšçš„é—®é¢˜**
2. **å¯¹å¼€å‘æœåŠ¡å™¨çš„åŸç†æ–¹é¢æœ‰ä¸€ä¸ªåŸºç¡€ç®€å•çš„è®¤è¯†(ä½¿ç”¨yarn devå‘½ä»¤åˆ°åº•å‘ç”Ÿäº†ä»€ä¹ˆäº‹æƒ…)**
> 1. **é¦–å…ˆæˆ‘ä»¬åˆ›å»ºä¸€ä¸ªvite-dev-serveræ–‡ä»¶å¤¹ï¼Œå…ˆåˆå§‹åŒ–å·¥ç¨‹**
> - æ‰§è¡Œ`yarn init -y`åˆå§‹åŒ–å·¥ç¨‹
> - å®‰è£…koa`yarn add koa`ï¼Œnodeç«¯çš„ä¸€ä¸ªæ¡†æ¶(**Koa æ˜¯ Express çš„å‡çº§ç‰ˆ**)
> 2. æ–°å»ºä¸€ä¸ªindex.jså¯¼å…¥koa
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673526605183-97b00100-90dd-4a11-8137-3a6feeef7e11.png#averageHue=%23030202&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=392&id=udd495ef3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=784&originWidth=1654&originalType=binary&ratio=1&rotation=0&showTitle=false&size=161119&status=done&style=none&taskId=u23d17f49-1e04-4580-b5f4-a03f3bddb3b&title=&width=827)
> - æ‰§è¡Œ`node index.js`è¿è¡Œè¯¥æ–‡ä»¶ï¼Œè®¿é—®127.0.0.1:5173ï¼Œæ§åˆ¶å°è¾“å‡º
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673526782120-2f5d56b3-8336-4c64-b713-fcd3a8e53f5d.png#averageHue=%23161613&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=191&id=u5e70babd&margin=%5Bobject%20Object%5D&name=image.png&originHeight=382&originWidth=1278&originalType=binary&ratio=1&rotation=0&showTitle=false&size=89888&status=done&style=none&taskId=u0d9e2bef-fa83-4b3c-a37f-6a678ea37c3&title=&width=639)
> æˆ‘ä»¬å¯ä»¥åœ¨package.jsonä¸­é…ç½®è„šæœ¬
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673526835785-e092f9f0-5031-4d98-906f-7dfee758685a.png#averageHue=%230a0807&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=149&id=uaaa59b08&margin=%5Bobject%20Object%5D&name=image.png&originHeight=298&originWidth=708&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30207&status=done&style=none&taskId=uba4887ef-15ce-4b29-8bed-513bcf4adce&title=&width=354)
> å°±å¯ä»¥ä½¿ç”¨yarn devå¯åŠ¨é¡¹ç›®äº†
> - æ¥ç€æˆ‘ä»¬ç¼–å†™è¯·æ±‚è·¯å¾„çš„å¤„ç†ä»£ç ï¼š
> 

```javascript
const Koa = require('koa');//nodeåªæ”¯æŒCommonJS,æ‰€ä»¥æˆ‘ä»¬åªå¯ä»¥ä½¿ç”¨require
const fs = require('fs');//fsæ˜¯nodeå†…ç½®çš„æ¨¡å—
const path = require('path');

const app = new Koa();// const vue = new Vue();

// å½“è¯·æ±‚æ¥ä¸´ä»¥åä¼šç›´æ¥è¿›å…¥åˆ°useæ³¨å†Œçš„å›è°ƒå‡½æ•°ä¸­
app.use(async (ctx) => {//ctxä¸Šä¸‹æ–‡
    console.log("ctx", ctx.request, ctx.response)
    if (ctx.request.url === '/') {
        // å‘æ ¹ç›®å½•è¯·æ±‚å†…å®¹,æˆ‘ä½¿ç”¨fsæ¨¡å—è¯»å–æ–‡ä»¶å†…å®¹
        const indexContent =
            await fs.promises.readFile(path.resolve(__dirname, "./index.html"))
        console.log(indexContent.toString())
        // è®¾ç½®å“åº”å¤´çš„å†…å®¹ç±»å‹æ ¼å¼ä¸ºhtmlæ ¼å¼
        ctx.response.set("Content-Type", "text/html")
        // è®¾ç½®å“åº”ä½“
        ctx.response.body = indexContent
    }
    if (ctx.request.url === '/main.js') {
        const mainContent =
            await fs.promises.readFile(path.resolve(__dirname, "./main.js"))
        console.log('mainJS', mainContent.toString())
        // è®¾ç½®å“åº”å¤´çš„å†…å®¹ç±»å‹æ ¼å¼ä¸ºjsæ ¼å¼,è®©æµè§ˆå™¨ä½¿ç”¨jsçš„æ ¼å¼å»è§£æ
        ctx.response.set("Content-Type", "text/javascript")
        // è®¾ç½®å“åº”ä½“
        ctx.response.body = mainContent
    }
    if (ctx.request.url === '/App.vue') {
        const mainVueContent =
            await fs.promises.readFile(path.resolve(__dirname, "./App.vue"))
        // å¦‚æœæ˜¯Vueæ–‡ä»¶,ä¼šåšä¸€ä¸ªå­—ç¬¦ä¸²æ›¿æ¢: å¦‚æœåŒ¹é…åˆ°äº†<template>ç›´æ¥è¿›è¡Œå…¨éƒ¨çš„å­—ç¬¦ä¸²çš„æ›¿æ¢

        // è®¾ç½®å“åº”ç±»å‹,å‘Šè¯‰æµè§ˆå™¨å³ä½¿çœ‹åˆ°çš„æ˜¯.vueçš„æ–‡ä»¶,ä¹Ÿä½¿ç”¨JSçš„æ–¹å¼å»è§£æ!!æ‰€ä»¥è¿™å°±æ˜¯æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«.vueæ–‡ä»¶ä¸­jsä»£ç çš„åŸå› 
        // æµè§ˆå™¨å¹¶ä¸ä¼šçœ‹æ–‡ä»¶çš„åç¼€,åœ¨æµè§ˆå™¨çœ¼é‡Œ,æ‰€æœ‰çš„æ–‡ä»¶éƒ½æ˜¯å­—ç¬¦ä¸²,æˆ‘ä»¬åªæœ‰è®¾ç½®äº†å“åº”ç±»å‹,æµè§ˆå™¨æ‰ä¼šä½¿ç”¨è¯¥ç±»å‹è§£æ
        ctx.response.set("Content-Type", "text/javascript")
        // è®¾ç½®å“åº”ä½“
        ctx.response.body = mainVueContent
    }

})
// å¼€å¯ä¸€ä¸ªæœåŠ¡,ç«¯å£å·ä¸º5173
app.listen(5173, () => {
    console.log('vite dev server listen on 5173')
})
```
> æ³¨æ„å¦‚æœæˆ‘ä»¬åœ¨ä¸Šé¢çš„ä»£ç çš„ä¸å»è®¾ç½®å“åº”ç±»å‹ï¼Œæµè§ˆå™¨åˆ™ä¼šæŠ¥é”™
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673529785985-b2452185-b70c-432d-8e05-e7ed1ae2da0f.png#averageHue=%2332191b&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=93&id=ueb17b8dd&margin=%5Bobject%20Object%5D&name=image.png&originHeight=186&originWidth=1118&originalType=binary&ratio=1&rotation=0&showTitle=false&size=27080&status=done&style=none&taskId=u1eb54b4a-b11a-48c5-bc94-17046b80170&title=&width=559)

**æ‰€ä»¥æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«**`**.vue**`**çš„æ–‡ä»¶å½’æ ¹ç»“åº•å°±æ˜¯**
> **æœåŠ¡ç«¯è®¾ç½®å“åº”ç±»å‹,å‘Šè¯‰æµè§ˆå™¨å³ä½¿çœ‹åˆ°çš„æ˜¯.vueçš„æ–‡ä»¶,ä¹Ÿä½¿ç”¨JSçš„æ–¹å¼å»è§£æ!!æ‰€ä»¥è¿™å°±æ˜¯æµè§ˆå™¨èƒ½å¤Ÿè¯†åˆ«.vueæ–‡ä»¶ä¸­jsä»£ç çš„åŸå› ã€‚**
> **è€Œä¸”æµè§ˆå™¨å¹¶ä¸ä¼šçœ‹æ–‡ä»¶çš„åç¼€,åœ¨æµè§ˆå™¨çœ¼é‡Œ,æ‰€æœ‰çš„æ–‡ä»¶éƒ½æ˜¯å­—ç¬¦ä¸²,æˆ‘ä»¬åªæœ‰è®¾ç½®äº†å“åº”ç±»å‹,æµè§ˆå™¨æ‰ä¼šä½¿ç”¨è¯¥ç±»å‹è§£æã€‚**
> **å¯ä»¥è¿™æ ·ç†è§£ï¼šæµè§ˆå™¨å°±æ˜¯ä¸€ä¸ªçå­ï¼Œå®ƒä¸å…³æ³¨æ–‡ä»¶çš„åç¼€ï¼Œåªæœ‰æˆ‘ä»¬é€šè¿‡å“åº”ç±»å‹å‘Šè¯‰æµè§ˆå™¨è®©å®ƒç”¨ä»€ä¹ˆç±»å‹è¿›è¡Œè§£æè¯¥æ–‡ä»¶ï¼Œå®ƒå°±ä¼šä½¿ç”¨ä»€ä¹ˆç±»å‹è¿›è¡Œè¯¥æ–‡ä»¶çš„è§£æ**
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673530630760-ee3db987-da2f-4c8c-8c93-607424d46ab0.png#averageHue=%233b4345&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=130&id=u771a3725&margin=%5Bobject%20Object%5D&name=image.png&originHeight=260&originWidth=1120&originalType=binary&ratio=1&rotation=0&showTitle=false&size=82066&status=done&style=none&taskId=u82e4fdb3-e8ef-4aec-9de9-166964acee8&title=&width=560)
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673530648325-954c0d47-0aaf-4541-9056-f836a9b2690a.png#averageHue=%23262b30&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=325&id=u7b804fa4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=650&originWidth=1120&originalType=binary&ratio=1&rotation=0&showTitle=false&size=189302&status=done&style=none&taskId=u793d5ba1-9936-4857-832b-7bfa6e34b7a&title=&width=560)
> æ³¨æ„è™½ç„¶æ˜¯`.vue`æ–‡ä»¶ï¼Œä½†æ˜¯æ–‡ä»¶é‡Œé¢çš„å†…å®¹å·²ç»ä¸æ˜¯æˆ‘ä»¬æ‰€å†™çš„åŸæœ¬çš„æ–‡ä»¶äº†ï¼Œå®ƒæ˜¯ç»è¿‡vueç¼–è¯‘è¿‡åçš„jsæ ¼å¼æ–‡ä»¶
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673525379500-c1dc5779-144d-4473-be85-378853a9932e.png#averageHue=%2324262a&clientId=uead2b537-05ea-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=651&id=aLnVb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1302&originWidth=1124&originalType=binary&ratio=1&rotation=0&showTitle=false&size=285373&status=done&style=none&taskId=u947bcdf1-a505-4c4f-96e1-5e5d4fa8e8f&title=&width=562)

# Viteä¸­å¯¹cssä»¥åŠcssæ¨¡å—åŒ–çš„å¤„ç†
> Viteå¤©ç”Ÿå°±æ”¯æŒå¯¹cssæ–‡ä»¶çš„ç›´æ¥å¤„ç†
> 1. viteè¯»å–åˆ°main.jsä¸­å¼•ç”¨äº†index.css
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673584399175-08d52562-3038-4ff0-9eb2-4ad252b5a732.png#averageHue=%232a2e36&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=122&id=ub69e24e0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=244&originWidth=598&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25226&status=done&style=none&taskId=ucf4bc17b-3aa3-4b4f-9a58-ee8d10c6b27&title=&width=299)
> 2. ç›´æ¥å»ä½¿ç”¨fsæ¨¡å—å»è¯»å–index.cssä¸­çš„æ–‡ä»¶å†…å®¹
> 3. ç›´æ¥åˆ›å»ºä¸€ä¸ªstyleæ ‡ç­¾ï¼Œå°†index.cssä¸­æ–‡ä»¶çš„å†…å®¹ç›´æ¥copyè¿›styleæ ‡ç­¾é‡Œ
> 4. å°†styleæ ‡ç­¾æ’å…¥åˆ°index.htmlçš„headä¸­
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673584368912-4494516d-e6f6-4e91-8468-a76c35f27444.png#averageHue=%23f2f3f2&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=281&id=u13f13f21&margin=%5Bobject%20Object%5D&name=image.png&originHeight=562&originWidth=1320&originalType=binary&ratio=1&rotation=0&showTitle=false&size=235247&status=done&style=none&taskId=ua64123e4-87d8-48c2-83fd-cf3a2de6002&title=&width=660)
> 5. å°†è¯¥cssæ–‡ä»¶ä¸­çš„å†…å®¹ç›´æ¥æ›¿æ¢ä¸ºjsè„šæœ¬(æ–¹ä¾¿çƒ­æ›´æ–°æˆ–è€…cssçš„æ¨¡å—åŒ–)ï¼ŒåŒæ—¶è®¾ç½®Content-Typeä¸ºjs ä»è€Œè®©æµè§ˆå™¨ä»¥jsè„šæœ¬çš„å½¢å¼æ¥æ‰§è¡Œè¯¥cssåç¼€çš„æ–‡ä»¶
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673584452045-4a95bd63-d67d-4918-9882-acc3fcce6317.png#averageHue=%23fcfaf5&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=222&id=uf045d1a1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=444&originWidth=1114&originalType=binary&ratio=1&rotation=0&showTitle=false&size=184948&status=done&style=none&taskId=u64235210-e954-4a36-83e7-ac95e387817&title=&width=557)

åœºæ™¯ï¼š

- ä¸€ä¸ªç»„ä»¶æœ€å¤–å±‚å…ƒç´ çš„ç±»åä¸€èˆ¬å–åä¸ºï¼š`.wrapper`
- ä¸€ä¸ªç»„ä»¶æœ€å†…å±‚å…ƒç´ çš„ç±»åä¸€èˆ¬å–åä¸ºï¼š`.footer`
> æˆ‘ä»¬å–äº†è¿™ä¸ªç±»åfooterï¼Œï¼Œåˆ«äººä¸çŸ¥é“ç„¶åä¹Ÿå–äº†è¿™ä¸ªç±»åfooter
> ç»„ä»¶Aï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673585544290-30131369-fa09-4d02-93bd-88d4933f2f2b.png#averageHue=%23292f37&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=120&id=u971a22ab&margin=%5Bobject%20Object%5D&name=image.png&originHeight=352&originWidth=1032&originalType=binary&ratio=1&rotation=0&showTitle=false&size=69346&status=done&style=none&taskId=uae0e44d3-563b-44cd-8ee7-a46e6bfc606&title=&width=351)![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673585552732-55251300-a7c7-4a78-b741-3dd22ac70cd1.png#averageHue=%232c3038&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=121&id=udfa92b0e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=460&originWidth=796&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55116&status=done&style=none&taskId=u6a2a1523-6e96-416e-b103-d0ab2bbb3b6&title=&width=210)
> ç»„ä»¶Bï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673585618969-a1cdc600-78ed-4b94-9614-bef168b46972.png#averageHue=%232a2f38&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=119&id=u49f4e15b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=352&originWidth=1032&originalType=binary&ratio=1&rotation=0&showTitle=false&size=71759&status=done&style=none&taskId=ua2f74348-9878-4ec1-82ef-ab9a5307db4&title=&width=349)![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673585627097-1d7508b9-b6d4-4dc3-b2be-a0bb6c0a6b36.png#averageHue=%232c3038&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=126&id=u31cf3eb4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=460&originWidth=730&originalType=binary&ratio=1&rotation=0&showTitle=false&size=53114&status=done&style=none&taskId=ufc82fd88-a2c5-4330-afb1-a0ace16446b&title=&width=200)
> main.jsä¸­å¼•å…¥ï¼Œæ‰“å¼€é¡µé¢å‘ç°ï¼šåå¼•å…¥çš„æŠŠå‰é¢çš„æ ·å¼è¦†ç›–æ‰äº†(å› ä¸ºç±»åå†²çª)ï¼Œè¿™å°±æ˜¯ååŒå¼€å‘æ—¶å€™å¾ˆå®¹æ˜“å‡ºç°çš„é—®é¢˜
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673585717221-2caa6c69-2249-4763-9236-c0673b89cc8a.png#averageHue=%23fcf9f7&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=580&id=uf03203bb&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1410&originWidth=1120&originalType=binary&ratio=1&rotation=0&showTitle=false&size=349800&status=done&style=none&taskId=uc2d4baa5-8392-454c-88be-0a3a40768a4&title=&width=461)

cssModuleå°±æ˜¯æ¥è§£å†³è¿™ä¸ªé—®é¢˜çš„
## css module
> åŸºäºä¸Šé¢çš„æ¡ˆä¾‹ï¼Œæˆ‘ä»¬åªéœ€è¦ 
> 1. é¦–å…ˆæŠŠä¸¤ä¸ªcssçš„æ–‡ä»¶çš„åç§°ä¿®æ”¹ä¸€ä¸‹ï¼šåœ¨`.css`å‰é¢åŠ ä¸Š`.module`
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673585970095-78d4dcac-6111-4455-98d0-8017a8a91664.png#averageHue=%23252931&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=110&id=u092f44d2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=220&originWidth=514&originalType=binary&ratio=1&rotation=0&showTitle=false&size=28057&status=done&style=none&taskId=u6dedc21e-f5cc-4176-b48f-6164df82fe6&title=&width=257)--->![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673586002373-03af639a-7eff-4989-86ca-ab1f1d117ebb.png#averageHue=%23252a31&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=108&id=u42f62365&margin=%5Bobject%20Object%5D&name=image.png&originHeight=216&originWidth=522&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30645&status=done&style=none&taskId=u23cf5e02-2532-41d8-a4d2-d641f46b58d&title=&width=261)
> 2. ä¿®æ”¹cssåœ¨ç»„ä»¶ä¸­çš„å¼•å…¥æ–¹å¼ï¼š
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673586410349-c887210d-2357-4727-8565-2fec3e605001.png#averageHue=%23292d35&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=95&id=u025410fa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=190&originWidth=1248&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35789&status=done&style=none&taskId=u346cb19a-cc31-4e5e-ad32-16ddc66098c&title=&width=624)
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673586423515-b75eac7f-1ae0-47a3-9531-1604a3c3a135.png#averageHue=%23292d35&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=95&id=ud6121a2d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=190&originWidth=1248&originalType=binary&ratio=1&rotation=0&showTitle=false&size=35663&status=done&style=none&taskId=u06d00750-6fa9-49af-a8f0-a0eeb1ee15e&title=&width=624)
> 3. åˆ†åˆ«è¾“å‡ºè¿™ä¸¤ä¸ªå¯¹è±¡ï¼š
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673586491111-8126cead-3d38-410b-9d8a-d45a72bb2dc0.png#averageHue=%23fefefd&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=95&id=ub25f0ba4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=190&originWidth=1124&originalType=binary&ratio=1&rotation=0&showTitle=false&size=88844&status=done&style=none&taskId=uee590d2b-978f-489d-85f9-369aaef05d2&title=&width=562)
> å¹¶ä¸”åœ¨é¡µé¢headä¸­ä¹Ÿæœ‰è¿™ä¸¤ä¸ªçš„styleæ ‡ç­¾ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673586540501-ccc5668f-a7bd-4b2c-aa41-ec558ed6bb3e.png#averageHue=%23fefefd&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=360&id=ub22110b9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=720&originWidth=1126&originalType=binary&ratio=1&rotation=0&showTitle=false&size=240152&status=done&style=none&taskId=u2af9857f-c368-4666-8e5f-5d5f7b047a8&title=&width=563)
> 4. ä½¿ç”¨è¯¥å¯¹è±¡ä¸­çš„footerå±æ€§
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673586638989-cb357172-2fae-433c-bae2-24a351c9cc0e.png#averageHue=%23292d35&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=95&id=u311d028e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=190&originWidth=924&originalType=binary&ratio=1&rotation=0&showTitle=false&size=30693&status=done&style=none&taskId=u92c1b232-b499-4a3c-83c2-c3c8c6edb30&title=&width=462)
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673586653966-a42523ef-b250-4138-976b-87891d5cd829.png#averageHue=%232a2e36&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=95&id=u418a59f5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=190&originWidth=990&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32872&status=done&style=none&taskId=uf806d9b0-276b-4269-a81b-f4d76f37266&title=&width=495)
> 5. é¡µé¢ï¼š
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673586707401-8a3a3f63-1997-40bf-99c8-d51e4b36c106.png#averageHue=%23800080&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=416&id=uc7b47db2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=832&originWidth=272&originalType=binary&ratio=1&rotation=0&showTitle=false&size=65893&status=done&style=none&taskId=u9b33e0fb-3788-4e37-b04d-dc1f47b74f7&title=&width=136)![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673586724232-02c4ffaa-0886-4b70-8c27-8686db97f8fb.png#averageHue=%23fefefd&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=292&id=ud4fa5a8b&margin=%5Bobject%20Object%5D&name=image.png&originHeight=584&originWidth=808&originalType=binary&ratio=1&rotation=0&showTitle=false&size=115619&status=done&style=none&taskId=ufdaa2cfa-5255-4a1c-8c7c-e60b6f59aca&title=&width=404)


å¤§æ¦‚åŸç†ï¼š
> ç”±äºåŸç†æ˜¯åŸºäºnodeJSçš„ï¼Œæ‰€ä»¥å¤§æ¦‚æè¿°ä¸€ä¸‹æµç¨‹
> 1. é€šè¿‡å¼•å…¥xxx.module.cssï¼Œnodeä¼šè¯»å–è¯¥æ–‡ä»¶ï¼Œnodeå‘ç°è¿™ä¸ªæ–‡ä»¶æ˜¯ä¸€ä¸ªmodule.css(moduleæ˜¯ä¸€ç§çº¦å®šï¼Œè¡¨ç¤ºéœ€è¦å¼€å¯cssæ¨¡å—åŒ–)
> 2. å°†æˆ‘ä»¬çš„æ‰€æœ‰ç±»åè¿›è¡Œä¸€å®šè§„åˆ™çš„æ›¿æ¢(å°†`.footer`æ›¿æ¢æˆ`._footer_kz4a9_1`)
> 3. åŒæ—¶åˆ›å»ºä¸€ä¸ªæ˜ å°„å¯¹è±¡`{footer:"_footer_kz4a9_1"}`
> 4. å°†æ›¿æ¢è¿‡åçš„å†…å®¹å¡è¿›styleæ ‡ç­¾é‡Œç„¶åæ”¾å…¥åˆ°headæ ‡ç­¾ä¸­
> 5. å°†`xxx.module.css`å†…å®¹å…¨éƒ¨æ›¿æ¢ä¸ºjsè„šæœ¬(æ–¹ä¾¿çƒ­æ›´æ–°æˆ–è€…cssçš„æ¨¡å—åŒ–)
> 6. å°†åˆ›å»ºçš„æ˜ å°„å¯¹è±¡åœ¨è„šæœ¬ä¸­è¿›è¡Œé»˜è®¤å¯¼å‡º
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673587892945-0be95ab7-2cb4-4086-a507-7f51c44827ee.png#averageHue=%23fdfcf7&clientId=uc84af25a-384d-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=307&id=u23c1606d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=684&originWidth=1388&originalType=binary&ratio=1&rotation=0&showTitle=false&size=247059&status=done&style=none&taskId=u4965634c-2d7e-489b-90dd-55173757f01&title=&width=622)


## less(é¢„å¤„ç†å™¨)
> Viteä¹Ÿå¯ä»¥å¯¹lessè¿›è¡Œè§£æï¼Œä¸è¿‡éœ€è¦å®‰è£…lessé¢„å¤„ç†å™¨ã€‚
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673588611124-d5e619f2-1944-4eb3-8d6f-4a3819d0ffc8.png#averageHue=%232a2e36&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=215&id=u0ab5ec65&margin=%5Bobject%20Object%5D&name=image.png&originHeight=838&originWidth=984&originalType=binary&ratio=1&rotation=0&showTitle=false&size=109560&status=done&style=none&taskId=u38b512db-d57b-493d-aab2-d7f3e04559b&title=&width=253)![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673588620501-a535d0f9-e573-4e57-9995-d938f2f68974.png#averageHue=%23292e37&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=222&id=ud36e916d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=730&originWidth=1308&originalType=binary&ratio=1&rotation=0&showTitle=false&size=167788&status=done&style=none&taskId=ub85e2a44-69bb-4a0c-b5ef-4872b186431&title=&width=397)
> åœ¨main.jsä¸­å¼•å…¥åviteå‡ºç°æŠ¥é”™æç¤ºï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673588741584-93ee4663-9f48-4c2e-969c-e587f1460473.png#averageHue=%232b3640&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=80&id=uc5c7b240&margin=%5Bobject%20Object%5D&name=image.png&originHeight=160&originWidth=1468&originalType=binary&ratio=1&rotation=0&showTitle=false&size=108209&status=done&style=none&taskId=u35ee1e67-2279-4ceb-b5d4-f730484fe50&title=&width=734)
> æˆ‘ä»¬éœ€è¦å®‰è£…lessé¢„å¤„ç†å™¨ï¼š
> `yarn add less`
> é‡æ–°å¯åŠ¨é¡¹ç›®ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673588882102-6bcba90a-bba3-47da-a9cd-e4ad70918ec5.png#averageHue=%23caddf4&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=321&id=uc3ebd68c&margin=%5Bobject%20Object%5D&name=image.png&originHeight=642&originWidth=2192&originalType=binary&ratio=1&rotation=0&showTitle=false&size=268917&status=done&style=none&taskId=uec409f3e-b66b-4947-a60b-5d6e4d7d801&title=&width=1096)
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673588911035-bbfbfb51-2ea2-49aa-a7f6-cf8d3a71398a.png#averageHue=%23fefbfb&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=174&id=u3d466512&margin=%5Bobject%20Object%5D&name=image.png&originHeight=348&originWidth=1388&originalType=binary&ratio=1&rotation=0&showTitle=false&size=80071&status=done&style=none&taskId=u90240c94-9b80-4d71-aa67-e59b95b1f5e&title=&width=694)


# vite.config.jsä¸­cssé…ç½®(modulesç¯‡)
> åœ¨vite.config.jsä¸­æˆ‘ä»¬é€šè¿‡csså±æ€§å»æ§åˆ¶æ•´ä¸ªviteå¯¹äºcssçš„å¤„ç†è¡Œä¸º
> - localsConventionï¼š
> 
æè¿°ï¼š
> å½“æˆ‘ä»¬xxx.module.cssä¸­å†™äº†ä¾‹å¦‚`.footer-content`è¿™ç§ç±»åï¼Œ
> è¯¥é…ç½®`localsConvention`æ˜¯ç”¨äºæ§åˆ¶åœ¨å¼•å…¥`xxx.module.css`çš„æ—¶å€™ï¼Œ
> å¯¹è±¡ä¸­çš„å±æ€§åç§°æ˜¾ç¤ºçš„å½¢å¼(ç”±äºjsä¸­å±æ€§åä¸èƒ½ç›´æ¥è°ƒç”¨å¸¦æœ‰`-`çš„å±æ€§)
> å€¼ï¼š
>    - åŸå§‹ï¼š
>       - ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673589810596-9f4445de-af6e-4390-89a3-6aae527d503e.png#averageHue=%23fdf8f7&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=79&id=u21c752fc&margin=%5Bobject%20Object%5D&name=image.png&originHeight=158&originWidth=1066&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29406&status=done&style=none&taskId=ub3648ab4-15d2-4798-a828-2ed3839038c&title=&width=533)
>    - camelCaseï¼šè¿›è¡Œé©¼å³°è½¬æ¢(ä¿ç•™åŸæ¥çš„)
>       - ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673589907101-080690e5-f7b3-4acb-9664-fdd3fc61ff6c.png#averageHue=%23fdf8f8&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=99&id=u33668681&margin=%5Bobject%20Object%5D&name=image.png&originHeight=198&originWidth=1384&originalType=binary&ratio=1&rotation=0&showTitle=false&size=46686&status=done&style=none&taskId=u77d7f75b-d7f7-46c6-bc8e-3e32458bd62&title=&width=692)
>    - camelCaseOnlyï¼šé©¼å³°(ä¸ä¿ç•™åŸæ¥çš„)
>       - ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673589963738-f27d201d-f523-4313-aae3-1f4598014e53.png#averageHue=%23fefefd&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=71&id=ufaec97c3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=142&originWidth=1080&originalType=binary&ratio=1&rotation=0&showTitle=false&size=59134&status=done&style=none&taskId=ud852b118-a29b-428f-a2df-8075190fd22&title=&width=540)
>    - dashes
>       - ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673590581733-7a9cd293-8551-4943-b27c-ecfff39a6ae2.png#averageHue=%23fdf7f7&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=96&id=u75dd1da9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=192&originWidth=1374&originalType=binary&ratio=1&rotation=0&showTitle=false&size=46354&status=done&style=none&taskId=ue721c36b-920c-4c1a-b44d-7cd7ab76d29&title=&width=687)
>    - dashesOnly
>       - ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673590616345-ee8c4c9f-379f-433d-b4d7-b00f2447ae7f.png#averageHue=%23fefefd&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=68&id=uab4e2c79&margin=%5Bobject%20Object%5D&name=image.png&originHeight=136&originWidth=1022&originalType=binary&ratio=1&rotation=0&showTitle=false&size=58406&status=done&style=none&taskId=ude7d0f66-5241-4008-8071-68bd175fcfb&title=&width=511)
> - scopeBehaviour
> 
æè¿°ï¼š
> é…ç½®å½“å‰çš„æ¨¡å—åŒ–è¡Œä¸ºæ˜¯æ¨¡å—åŒ–è¿˜æ˜¯å…¨å±€åŒ–(æœ‰hashåç¼€å°±æ˜¯å¼€å¯äº†æ¨¡å—åŒ–çš„ä¸€ä¸ªæ ‡å¿—ï¼Œå› ä¸ºå®ƒå¯ä»¥ä¿è¯äº§ç”Ÿä¸åŒçš„hashå€¼ä½¿æ ·å¼ä¸ä¼šè¢«è¦†ç›–)
> å€¼ï¼š
>    - é»˜è®¤ï¼šlocalï¼ˆæ ·å¼ç±»åæœ‰hashåç¼€ï¼Œå¯ä»¥é˜²æ­¢æ ·å¼å†²çªï¼‰
>    - globalï¼šï¼ˆæ ·å¼ç±»åæ²¡æœ‰hashåç¼€ï¼Œä¼šå¯¼è‡´æ ·å¼å†²çªï¼‰
> - generateScopedNameï¼šç”Ÿæˆç±»åçš„è§„åˆ™
> 
æè¿°ï¼š
> ä¿®æ”¹xxx.moudle.cssæ–‡ä»¶ä¸­çš„cssç±»åæœ€ç»ˆç”Ÿæˆçš„è§„åˆ™
> [https://github.com/webpack/loader-utils#interpolatename](https://github.com/webpack/loader-utils#interpolatename)
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673589907101-080690e5-f7b3-4acb-9664-fdd3fc61ff6c.png#averageHue=%23fdf8f8&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=99&id=Eu3Ah&margin=%5Bobject%20Object%5D&name=image.png&originHeight=198&originWidth=1384&originalType=binary&ratio=1&rotation=0&showTitle=false&size=46686&status=done&style=none&taskId=u77d7f75b-d7f7-46c6-bc8e-3e32458bd62&title=&width=692)
> é»˜è®¤æ˜¯ï¼š`_[local]_[hash:5]`ã€‚
> æˆ‘ä»¬ä¿®æ”¹è¯¥å±æ€§ä¸º`"[name]_[local]_[hash:5]"`ç»“æœå¦‚ä¸‹
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673592119026-4485d313-2597-4563-a75a-07d043ccfcc8.png#averageHue=%23fefefd&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=83&id=ube30d09a&margin=%5Bobject%20Object%5D&name=image.png&originHeight=166&originWidth=1084&originalType=binary&ratio=1&rotation=0&showTitle=false&size=86826&status=done&style=none&taskId=ua8edadbd-2c68-408a-97e5-0378266acfa&title=&width=542)
> - hashPrefixï¼šç”Ÿæˆhashä¼šæ ¹æ®ä½ çš„ç±»åå»è¿›è¡Œç”Ÿæˆï¼Œå¦‚æœä½ æƒ³è¦ä½ ç”Ÿæˆçš„hashç‹¬ç‰¹ä¸€äº›åˆ™å¯ä»¥é…ç½®è¯¥å±æ€§
> - globalModulePathsï¼šä»£è¡¨ä¸æƒ³å‚ä¸cssæ¨¡å—åŒ–çš„è·¯å¾„


# Viteé…ç½®æ–‡ä»¶ä¸­cssé…ç½®(preprocessorOptionsç¯‡)
> ä¸»è¦ç”¨äºé…ç½®cssé¢„å¤„ç†å™¨çš„ä¸€äº›å…¨å±€å‚æ•°ï¼Œ
> æ¯”å¦‚è¯´æˆ‘ä»¬ç¼–è¯‘lessçš„æ—¶å€™ä½¿ç”¨çš„`npx lessc ComponentC.module.less`
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673594694128-6ed68289-7a4f-41cb-ac4a-009ab0897052.png#averageHue=%232a2e37&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=295&id=u18a88cf9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=946&originWidth=984&originalType=binary&ratio=1&rotation=0&showTitle=false&size=130301&status=done&style=none&taskId=u3f9af5af-9085-409d-a900-e509a0faec3&title=&width=307)
> å¦‚æœæ‰§è¡Œä¸Šé¢çš„å‘½ä»¤ä¸åŠ æŸä¸ªå‚æ•°ï¼Œåˆ™lessåªèƒ½è®¡ç®—æ‹¬å·å†…çš„ï¼ŒåŠ ä¸Šå‚æ•°ï¼š
> `npx lessc ComponentC.module.less --math="always"`ï¼Œåˆ™ä¼šè®¡ç®—æ‰€æœ‰çš„
> å…¶ä¸­åé¢åŠ çš„`--math="always"`å°±æ˜¯å…¨å±€å‚æ•°ã€‚

åœ¨viteçš„é…ç½®æ–‡ä»¶ä¸­ä¹Ÿå¯ä»¥é…ç½®ï¼š
> å¦‚æœä¸è¿›è¡Œé…ç½®ï¼Œç»“æœå¦‚ä¸‹ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673594973799-c5c5e2f8-b711-494a-99f5-f0f4636da1ca.png#averageHue=%23fefdf9&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=87&id=u0ab6c567&margin=%5Bobject%20Object%5D&name=image.png&originHeight=174&originWidth=622&originalType=binary&ratio=1&rotation=0&showTitle=false&size=45403&status=done&style=none&taskId=u86748650-d7e9-4f29-ac6c-65a7b79c4ac&title=&width=311)
> åœ¨vite.config.jsä¸­æ·»åŠ å¦‚ä¸‹é…ç½®ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673595112005-e1d88d20-f105-4e82-82ac-2d42f77e1e4a.png#averageHue=%23292d36&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=278&id=u4cb31019&margin=%5Bobject%20Object%5D&name=image.png&originHeight=838&originWidth=1582&originalType=binary&ratio=1&rotation=0&showTitle=false&size=130908&status=done&style=none&taskId=u5989c646-a8b1-4048-97bc-f7e8fda0e77&title=&width=525)
> åˆ™`math:"always"`å°±ä¼šè¢«ä½œä¸ºç¼–è¯‘çš„æ‰§è¡Œå‚æ•°
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673595235813-50006803-3fe5-451b-80de-475ed4017ee0.png#averageHue=%23fdf7f7&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=89&id=u2740bad1&margin=%5Bobject%20Object%5D&name=image.png&originHeight=178&originWidth=536&originalType=binary&ratio=1&rotation=0&showTitle=false&size=23928&status=done&style=none&taskId=u235e34ad-a9c3-4f9a-b384-5ab16f9be31&title=&width=268)

## lessçš„å…¨å±€å˜é‡
> lessæ˜¯å¯ä»¥å®šä¹‰å˜é‡çš„ï¼Œåˆ†ä¸ºå±€éƒ¨å˜é‡(ç‹¬æœ‰çš„)å’ŒæŠŠå˜é‡å•ç‹¬å†™æˆä¸€ä¸ªlessæ–‡ä»¶(å…¬å…±çš„ä¸»é¢˜)ç„¶ååˆ†åˆ«å¯¼å…¥ã€‚
> ä½†æ˜¯æˆ‘ä»¬æ¯æ¬¡éœ€è¦ç”¨åˆ°çš„åœ°æ–¹å°±è¦æ¯æ¬¡å¯¼å…¥
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673595839885-3c22fb6e-f70c-47d5-b154-527302ea6e10.png#averageHue=%232a2e36&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=106&id=u77069729&margin=%5Bobject%20Object%5D&name=image.png&originHeight=244&originWidth=664&originalType=binary&ratio=1&rotation=0&showTitle=false&size=29407&status=done&style=none&taskId=u236d0330-8c3e-403e-8474-25f52dd88d1&title=&width=288)![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673595846162-d1754546-60dc-42c4-bc6a-d1e444682462.png#averageHue=%232c3139&clientId=u0595b202-e3b2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=95&id=ua3642dec&margin=%5Bobject%20Object%5D&name=image.png&originHeight=244&originWidth=826&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34475&status=done&style=none&taskId=uec172216-43dc-490c-a467-df8a6e9aa30&title=&width=321)
> ç”±äº`@import`æœ¬èº«æœ‰ä¸€äº›æ€§èƒ½é—®é¢˜ï¼Œè¿˜æœ‰æ¯æ¬¡éƒ½éœ€è¦å†™æ¯”è¾ƒç¹çï¼Œæˆ‘ä»¬å°±å¯ä»¥é…ç½®preprocessorOptionsæ¥æ–¹ä¾¿å¼€å‘å’Œç®¡ç†
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673596191573-247adc3f-149f-4333-9097-86a20a6a9cc9.png#averageHue=%232a2e36&clientId=ue771b802-8eb2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=338&id=ufa6b96ab&margin=%5Bobject%20Object%5D&name=image.png&originHeight=676&originWidth=1408&originalType=binary&ratio=1&rotation=0&showTitle=false&size=124780&status=done&style=none&taskId=u5e0b19da-3a1a-44c7-ba96-382bc115306&title=&width=704)
> ç„¶åæŠŠå…¨éƒ¨çš„å¯¼å…¥éƒ½å¯ä»¥åˆ é™¤ï¼›å®ƒå°±ä¼šå»æˆ‘ä»¬é…ç½®çš„å…¨å±€å˜é‡ä¸­æ‰¾è¯¥å˜é‡ï¼Œå¦‚æœå…¨å±€å˜é‡ä¸­ä¹Ÿæ²¡æœ‰åˆ™ä¼šæŠ¥é”™ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673596377963-7e3e3ff1-5d5f-4ac5-956e-fa440053b9ab.png#averageHue=%23232423&clientId=ue771b802-8eb2-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=457&id=u79546714&margin=%5Bobject%20Object%5D&name=image.png&originHeight=914&originWidth=1752&originalType=binary&ratio=1&rotation=0&showTitle=false&size=402324&status=done&style=none&taskId=u5ed5c686-4795-4979-bd0b-a398692e936&title=&width=876)


# Viteé…ç½®æ–‡ä»¶ä¸­cssé…ç½®(devSourcemapç¯‡)
> sourceMap
> æ–‡ä»¶ä¹‹é—´çš„ç´¢å¼•ï¼šå‡è®¾æˆ‘ä»¬çš„æ–‡ä»¶è¢«å‹ç¼©æˆ–è€…ç¼–è¯‘è¿‡åï¼Œè¿™ä¸ªæ—¶å€™ç¨‹åºå‡ºé”™ï¼Œå®ƒå°†ä¸ä¼šäº§ç”Ÿæ­£ç¡®çš„é”™è¯¯ä½ç½®ä¿¡æ¯ï¼Œå¦‚æœè®¾ç½®äº†sourceMapï¼Œä»–å°±ä¼šæœ‰ä¸€ä¸ªç´¢å¼•æ–‡ä»¶mapã€‚
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673597018913-3ab6afc6-5073-4c5c-acb9-a56d4328fc1e.png#averageHue=%232b2f37&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=95&id=u94de7eda&margin=%5Bobject%20Object%5D&name=image.png&originHeight=190&originWidth=984&originalType=binary&ratio=1&rotation=0&showTitle=false&size=34835&status=done&style=none&taskId=u735fbf70-b721-4cdf-b988-b3098d84cc9&title=&width=492)
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673597055577-b9ebd46e-b626-48d2-a32e-0e06e6de284f.png#averageHue=%23fefefd&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=301&id=uac85e340&margin=%5Bobject%20Object%5D&name=image.png&originHeight=602&originWidth=1118&originalType=binary&ratio=1&rotation=0&showTitle=false&size=147098&status=done&style=none&taskId=ub83a0001-f3e3-4994-be89-af1131b466f&title=&width=559)

# postcss
> viteå¤©ç”Ÿå¯¹postcssæœ‰éå¸¸è‰¯å¥½çš„æ”¯æŒ
> postcsså®ƒçš„ç”¨é€”å°±æ˜¯ä¿è¯cssæ‰§è¡Œèµ·æ¥ä¸‡æ— ä¸€å¤±ï¼
> æˆ‘ä»¬å†™çš„cssä»£ç (æ€ä¹ˆçˆ½æ€ä¹ˆå†™)-->postcss-->ã€å»å°†è¯­æ³•ç¼–è¯‘(åµŒå¥—è¯­æ³•ï¼Œå‡½æ•°ï¼Œå˜é‡)æˆåŸç”Ÿcssã€‘lessï¼Œsassç­‰é¢„å¤„ç†å™¨éƒ½å¯ä»¥åš-->å†æ¬¡å¯¹æœªæ¥çš„é«˜çº§cssè¯­æ³•è¿›è¡Œé™çº§-->å‰ç¼€è¡¥å…¨-->æµè§ˆå™¨å®¢æˆ·ç«¯
> ä¸babelå¯¹æ¯”ï¼š
> æˆ‘ä»¬å†™çš„jsä»£ç (æ€ä¹ˆçˆ½æ€ä¹ˆå†™)-->babel-->å°†æœ€æ–°çš„tsè¯­æ³•è¿›è¡Œè½¬æ¢jsè¯­æ³•-->åšä¸€æ¬¡è¯­æ³•é™çº§--äº¤ç»™æµè§ˆå™¨å®¢æˆ·ç«¯

æ¯”å¦‚æˆ‘ä»¬ä½¿ç”¨csså˜é‡(cssæ–°çš„ææ¡ˆ)çš„å†™æ³•ï¼š(æ³¨æ„å¿…é¡»ä½¿ç”¨`--`å¼€å¤´)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673598082755-d6d6abc9-24c8-4369-bb07-1f10277cb23b.png#averageHue=%232a2e36&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=176&id=uc777bbb4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=352&originWidth=752&originalType=binary&ratio=1&rotation=0&showTitle=false&size=37083&status=done&style=none&taskId=u8f4aa3b4-e5ef-42c3-aef7-bfb6724a440&title=&width=376)
åœ¨main.jsä¸­å¼•å…¥åï¼Œåœ¨æƒ³ä½¿ç”¨çš„åœ°æ–¹ä½¿ç”¨`var(--xxx)`
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673598124750-a488c828-b0ed-427a-8a8a-98a529351eb3.png#averageHue=%232a2e36&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=230&id=u48411f37&margin=%5Bobject%20Object%5D&name=image.png&originHeight=460&originWidth=1012&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55966&status=done&style=none&taskId=u3a9fde0f-f410-461a-b033-c56f321d777&title=&width=506)
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673598223203-bd9189d7-614c-4b3c-81ab-192d3ebc7550.png#averageHue=%23fefafa&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=208&id=ua41b80c5&margin=%5Bobject%20Object%5D&name=image.png&originHeight=416&originWidth=666&originalType=binary&ratio=1&rotation=0&showTitle=false&size=44676&status=done&style=none&taskId=ua3fa0174-dd7b-411e-9c6b-bbb2eb82548&title=&width=333)
> babel--->å¸®åŠ©æˆ‘ä»¬è®©jsæ‰§è¡Œèµ·æ¥ä¸‡æ— ä¸€å¤±
> 

```javascript
class App{	}//es6çš„å†™æ³•
//ç»è¿‡babelçš„è½¬æ¢
function App(){		}//es3çš„å†™æ³•
```
é‚£ä¹ˆæˆ‘ä»¬è¿™æ ·å†™äº†ï¼Œæµè§ˆå™¨çš„å…¼å®¹æ€§æˆ‘ä»¬èƒ½è€ƒè™‘åˆ°å—ï¼Ÿé¢„å¤„ç†å™¨å¹¶ä¸èƒ½å¸®æˆ‘ä»¬è§£å†³è¿™äº›é—®é¢˜ï¼š

1. å¯¹æœªæ¥csså±æ€§çš„ä¸€äº›ä½¿ç”¨é™çº§é—®é¢˜
2. å‰ç¼€è¡¥å…¨ï¼šGoogleï¼š--webkit
## ä½¿ç”¨postcss

1. å®‰è£…ï¼š`yarn add postcss-cli postcss -D`
> postcss-cliæä¾›ç¼–è¯‘çš„ä¸€äº›å‘½ä»¤ï¼Œpostcssåšç¼–è¯‘çš„å·¥ä½œ

2. ä¹¦å†™æè¿°æ–‡ä»¶
   - postcss.config.jså¹¶å®‰è£…é¢„å¤„ç†ç¯å¢ƒ
   - `yarn add postcss-preset-env -D`
```javascript
// å°±ç±»ä¼¼å…¨å±‹å‡€æ°´ç³»ç»ŸåŠ æ’æ§½,åŠ é¢å¤–çš„åŠŸèƒ½
// é¢„è®¾ç¯å¢ƒä¸­æ˜¯ä¼šåŒ…å«å¾ˆå¤šçš„æ’ä»¶çš„
// è¯­æ³•é™çº§ --> postcss-low-level
// ç¼–è¯‘æ’ä»¶ --> postcss-compiler
// ...
// é¢„è®¾å°±æ˜¯æŠŠè¿™äº›å¿…è¦çš„æ’ä»¶éƒ½ç»™æˆ‘ä»¬è£…ä¸Šäº†
// åšè¯­æ³•ç¼–è¯‘ lessè¯­æ³•,sassè¯­æ³•ï¼Œä½†æ˜¯ç”±äºå®˜æ–¹ç»´æŠ¤çš„è¿™äº›æ’ä»¶éƒ½åœæ­¢ç»´æŠ¤äº†
const postcssPresetEnv = require('postcss-preset-env')
module.exports = {
    plugins: [
        // å¯¹cssé«˜çº§è¯­æ³•é™çº§çš„æ’ä»¶
        postcssPresetEnv()
    ]

}
```
> ç›®å‰æ¥è¯´ lesså’Œsassç­‰ä¸€ç³»åˆ—çš„é¢„å¤„ç†å™¨postcssæ’ä»¶å·²ç»åœæ­¢ç»´æŠ¤äº†(ç»´æŠ¤æˆæœ¬å¤ªé«˜) lessæ’ä»¶ ä½ è‡ªå·±å…¶ä½¿ç”¨lesså’Œsassç¼–è¯‘å®Œäº†ï¼Œç„¶åæŠŠç¼–è¯‘ç»“æœç»™æˆ‘
> **æ‰€ä»¥ä¸šå†…å°±äº§ç”Ÿäº†ä¸€ä¸ªæ–°çš„è¯´æ³•ï¼špostcssæ˜¯åå¤„ç†å™¨**

ä½¿ç”¨`npx postcss index.css -o result.css`å‘½ä»¤è¿›è¡ŒæŠŠindex.cssè¾“å‡ºä¸ºresult.css
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673600818604-99ed7f1c-f31b-4a75-9846-83f50a49344a.png#averageHue=%23292e36&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=172&id=u30f8c42d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=514&originWidth=1054&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55298&status=done&style=none&taskId=u208b78f1-5033-4da1-bd2e-e9fc0226af6&title=&width=352)![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673600839340-a44e86eb-f33a-4456-98b6-63418232be03.png#averageHue=%232a2f37&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=204&id=u13acf828&margin=%5Bobject%20Object%5D&name=image.png&originHeight=568&originWidth=1054&originalType=binary&ratio=1&rotation=0&showTitle=false&size=66403&status=done&style=none&taskId=uaacc5f4a-afc1-4d94-929a-bb73f099b06&title=&width=378)
# Viteé…ç½®æ–‡ä»¶ä¸­cssé…ç½®(postcssç¯‡)
> ç›´æ¥åœ¨**css.postcss**ä¸­è¿›è¡Œé…ç½®ï¼Œè¯¥å±æ€§ç›´æ¥é…ç½®çš„å°±æ˜¯postcssçš„é…ç½®(æˆ–è€…åˆ›å»ºä¸€ä¸ªpostcss.config.jsæ–‡ä»¶ï¼Œviteä¼šè‡ªåŠ¨å¯¼å…¥)
> æˆ‘ä»¬ç”šè‡³éƒ½ä¸éœ€è¦å®‰è£…postcss-cliå’Œpostcssï¼Œæˆ‘ä»¬åªéœ€è¦å®‰è£…ä¸€ä¸ª`postcss-preset-env`çš„é¢„è®¾ç¯å¢ƒæ’ä»¶
> - postcss-preset-envï¼šæ”¯æŒcsså˜é‡å’Œä¸€äº›æœªæ¥çš„cssè¯­æ³•ï¼Œè‡ªåŠ¨è¡¥å…¨(autoprefixer)
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673601897333-218af7dc-da29-4724-bb2c-4e3cef846b02.png#averageHue=%232a2e37&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=122&id=uf421fc37&margin=%5Bobject%20Object%5D&name=image.png&originHeight=244&originWidth=1336&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55128&status=done&style=none&taskId=u9d816538-553b-4dc2-b940-2173b53ff0c&title=&width=668)
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673601888620-04824d4f-d2de-42c3-ad08-5781fd7c07b4.png#averageHue=%232a2f38&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=149&id=ub3561bfa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=298&originWidth=876&originalType=binary&ratio=1&rotation=0&showTitle=false&size=39031&status=done&style=none&taskId=uaca825d2-936b-4c75-9a24-a1418b04ece&title=&width=438)

æˆ‘ä»¬å°è¯•åœ¨lessä¸­å†™ä¸€ä¸ªæ–°çš„å†™æ³•ï¼š
```less
// widthçš„æ–°çš„å“åº”å¼çš„å†™æ³•,æœ€å°100px,æœ€å¤§200px,100åˆ°200ä¹‹é—´éƒ½æ˜¯ç™¾åˆ†ä¹‹30
width: clamp(100px, 30%, 200px);
```
å¯åŠ¨ååœ¨é¡µé¢å£°å‘ˆç°çš„æ˜¯ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673602011245-028e55b8-fb5d-4ec4-9856-a7f0c548bc57.png#averageHue=%23fefefd&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=93&id=u0c1ef0b4&margin=%5Bobject%20Object%5D&name=image.png&originHeight=186&originWidth=624&originalType=binary&ratio=1&rotation=0&showTitle=false&size=55339&status=done&style=none&taskId=u17efac26-2d13-4b8d-b9e8-6e9e7dd4bd3&title=&width=312)è¢«è½¬æ¢äº†max()ã€‚
å› ä¸ºviteå†…éƒ¨ä¼šæœ‰ä¸€ä¸ªä¸»æµæµè§ˆå™¨çš„æ”¯æŒè¡¨ã€‚
æ¼”ç¤ºè‡ªåŠ¨è¡¥å…¨ï¼š`user-select: none;`è¡¥å…¨ä¸ºäº†![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673602174010-dc93598d-3e64-43ca-87d5-af152bededfa.png#averageHue=%23c1d8ed&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=54&id=u62552f10&margin=%5Bobject%20Object%5D&name=image.png&originHeight=108&originWidth=416&originalType=binary&ratio=1&rotation=0&showTitle=false&size=25196&status=done&style=none&taskId=u2a48d7b7-7a3b-4676-962b-ab5c7cf3f38&title=&width=208)
# å…³äºpostcssæ²¡æœ‰ç¼–è¯‘å…¨å±€csså˜é‡çš„é—®é¢˜
> åœ¨å¼€å‘ä¸­ï¼Œå‘ç°postcssåœ¨å¤„ç†å…¨å±€çš„csså˜é‡çš„æ—¶å€™ï¼Œå¹¶æ²¡æœ‰ç»™æˆ‘ä»¬æ–°æ·»åŠ ä¸€ä¸ªè¯¥å˜é‡å›ºå®šçš„å±æ€§å€¼ï¼Œå¦‚å›¾ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673603100632-f6df7749-123e-4fff-9a44-e11cfa084170.png#averageHue=%23fefefd&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=242&id=uabd604d0&margin=%5Bobject%20Object%5D&name=image.png&originHeight=484&originWidth=724&originalType=binary&ratio=1&rotation=0&showTitle=false&size=98174&status=done&style=none&taskId=uf9520dc6-ff53-4b63-b6ab-346b262d1c7&title=&width=362)
> æˆ‘ä»¬æŠŠè¿™ä¸ªå…¨å±€çš„å˜é‡å†™åˆ°å’Œä½¿ç”¨å˜é‡çš„åœ°æ–¹åŒä¸€ä¸ªä½ç½®
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673603260862-8e14f795-09a7-4941-ad51-3bc668bc0252.png#averageHue=%23292d36&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=341&id=u8fb6c8ce&margin=%5Bobject%20Object%5D&name=image.png&originHeight=682&originWidth=2060&originalType=binary&ratio=1&rotation=0&showTitle=false&size=104587&status=done&style=none&taskId=u5867fdb3-91e3-4206-93b9-5c870830d01&title=&width=1030)
> ç»“æœå‘ç°ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673603285355-58da349f-8d55-4870-83d9-ae3b88ff5fea.png#averageHue=%23fefbfb&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=246&id=udd27f9b2&margin=%5Bobject%20Object%5D&name=image.png&originHeight=492&originWidth=1078&originalType=binary&ratio=1&rotation=0&showTitle=false&size=67701&status=done&style=none&taskId=u0dd7214a-8a91-4fd3-8c9d-83929ad13d2&title=&width=539)è¢«ç¼–è¯‘äº†ã€‚
> è¿™æ˜¯å› ä¸ºpostcssæ˜¯ç¼–è¯‘å®Œä¸€ä¸ªæ–‡ä»¶å°±ä¸è®°å¾—å­˜åœ¨è¿™ä¸ªæ–‡ä»¶äº†ï¼Œæ˜¯æ²¡æœ‰è®°å¿†çš„ã€‚æ‰€ä»¥å®ƒåœ¨ç¼–è¯‘åˆ°éœ€è¦varè·å–å˜é‡çš„æ—¶å€™åœ¨è¯¥æ–‡ä»¶è·å–ä¸åˆ°ï¼å› æ­¤å°±å‡ºç°äº†è¿™ä¸ªé—®é¢˜ã€‚
> è§£å†³åŠæ³•ï¼š
> åœ¨postcssPresetEnvä¸­æ·»åŠ é…ç½®å¯¹è±¡ï¼š**importFrom**ï¼Œå°±å¥½æ¯”ä½ ç°åœ¨è®©postcsså»çŸ¥é“æœ‰ä¸€äº›å˜é‡å®ƒéœ€è¦è®°ä¸‹æ¥ã€‚

```javascript
postcss: {
  plugins: [postcssPresetEnv({
    importFrom: path.resolve(__dirname, "./variable.css"),
  })]
}
```
ä½†æ˜¯å¯åŠ¨åä¼šå‡ºç°è­¦å‘Šï¼š
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673603637406-8ec10211-d737-4b01-9b3c-ebd1080dd3b4.png#averageHue=%23272c34&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=66&id=u179aecfc&margin=%5Bobject%20Object%5D&name=image.png&originHeight=132&originWidth=1680&originalType=binary&ratio=1&rotation=0&showTitle=false&size=108096&status=done&style=none&taskId=ue021f0f6-4be9-4540-9161-622b25bead6&title=&width=840)
# ä¸ºä»€ä¹ˆæˆ‘ä»¬åœ¨æœåŠ¡ç«¯å¤„ç†è·¯å¾„çš„æ—¶å€™ä¸€å®šè¦ä½¿ç”¨path
> æˆ‘ä»¬æ­£å¸¸å†™ä¸€ä¸ªè¯»å–æ–‡ä»¶çš„jsï¼Œä¸ä½¿ç”¨pathæ¨¡å—
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673604451723-3ecdbeb6-c7cf-41fc-a3f2-0ac17cda5ae8.png#averageHue=%232a2f37&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=419&id=u0514a06d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=838&originWidth=1236&originalType=binary&ratio=1&rotation=0&showTitle=false&size=135820&status=done&style=none&taskId=u516870a4-ea3a-457b-a070-623282b5ccf&title=&width=618)
> åœ¨è¯¥ç›®å½•ä¸‹æ‰§è¡Œ`node main.js`æˆåŠŸè¯»å–æ–‡ä»¶
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673604488317-403d58b0-6f81-4f7a-be4e-4539529c4fb0.png#averageHue=%232a343d&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=65&id=uc5c264b3&margin=%5Bobject%20Object%5D&name=image.png&originHeight=130&originWidth=630&originalType=binary&ratio=1&rotation=0&showTitle=false&size=32436&status=done&style=none&taskId=u89931ce8-91e7-4e89-9d3f-2020c50f280&title=&width=315)
> ä½†æ˜¯å¦‚æœæˆ‘ä»¬æ²¡æœ‰åœ¨å½“å‰ç›®å½•ä¸‹æ‰§è¡Œè¯¥å‘½ä»¤ï¼Œæˆ‘ä»¬åœ¨å¤–é¢ä¸€å±‚æ‰§è¡Œå‘½ä»¤ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673604536215-764b5a52-51c6-4a9a-9730-67be6b4089e6.png#averageHue=%232f343e&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=191&id=uf60adffa&margin=%5Bobject%20Object%5D&name=image.png&originHeight=382&originWidth=1310&originalType=binary&ratio=1&rotation=0&showTitle=false&size=190647&status=done&style=none&taskId=u67308e2c-61b3-4a16-9590-79d4e018c05&title=&width=655)
> åˆ™ä¼šå‡ºç°æ‰¾ä¸åˆ°æ–‡ä»¶çš„æŠ¥é”™ã€‚

è¿™æ˜¯å› ä¸ºåœ¨è¯»å–æ–‡ä»¶çš„æ—¶å€™ï¼Œnodeçš„fsæ¨¡å—ä¼šæ‹¿åˆ°ä½ åœ¨æ‰§è¡Œnodeå‘½ä»¤çš„ç›®å½•çš„è·¯å¾„ï¼Œå¦‚æœæˆ‘ä»¬ä½¿ç”¨çš„æ˜¯ç›¸å¯¹è·¯å¾„ï¼Œnodeåˆ™ä»¥`process.cwd()`æ‰§è¡Œå‘½ä»¤çš„ç›®å½•ä½œä¸ºæ ¹ç›®å½•ï¼Œå»æŸ¥æ‰¾æ–‡ä»¶çš„ç›¸å¯¹è·¯å¾„çš„ä½ç½®ã€‚æ‰€ä»¥æ–‡ä»¶ä¼šæ‰¾ä¸åˆ°ã€‚å› æ­¤æˆ‘ä»¬éœ€è¦ä½¿ç”¨ç»å¯¹è·¯å¾„
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673605284495-7534754c-f09f-4b29-b43f-6ac7d3cfe675.png#averageHue=%23292d36&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=446&id=u1b2b9e1e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=892&originWidth=3556&originalType=binary&ratio=1&rotation=0&showTitle=false&size=297842&status=done&style=none&taskId=u8b46cc49-68b3-46df-9c4b-cb9bb481d47&title=&width=1778)
> é‚£`__dirname`æ˜¯æ€ä¹ˆæ¥çš„å‘¢ï¼Ÿä¸ºä»€ä¹ˆæˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨å®ƒï¼Ÿ
> æ˜¯å› ä¸ºæˆ‘ä»¬nodeç«¯å†™çš„ä½¿ç”¨ä»£ç éƒ½ä¼šæ”¾åˆ°ä¸€ä¸ªç«‹å³æ‰§è¡Œå‡½æ•°ä¸­ï¼Œç«‹å³æ‰§è¡Œå‡½æ•°ä¼ é€’ç»™æˆ‘ä»¬äº†è¿™äº›å‚æ•°ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨ã€‚
> éªŒè¯ï¼šä½¿ç”¨argumentsè·å–å‡½æ•°çš„æ‰€æœ‰å‚æ•°
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673605511328-a1cd1d33-c326-45c1-957f-9d61cdd58112.png#averageHue=%23282d36&clientId=u628220a4-52c4-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=842&id=u773cdbed&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1684&originWidth=1934&originalType=binary&ratio=1&rotation=0&showTitle=false&size=654236&status=done&style=none&taskId=u12be8db9-e195-4ad8-adb7-5b1a6569a04&title=&width=967)


# Viteå¯¹é™æ€èµ„æºçš„å¤„ç†ä»¥åŠåˆ«åçš„é…ç½®
> ä»€ä¹ˆæ˜¯é™æ€èµ„æºï¼Ÿ
> å›¾ç‰‡ï¼Œè§†é¢‘èµ„æºï¼ŒSVGèµ„æº......

Viteå¯¹é™æ€èµ„æºåŸºæœ¬ä¸Šéƒ½æ˜¯å¼€ç®±å³ç”¨çš„
> é™æ€èµ„æºçš„å­˜æ”¾è·¯å¾„ä¸€èˆ¬éƒ½æ˜¯åœ¨`src/assets/`åœ¨jsä¸­ä½¿ç”¨å¯ä»¥ç›´æ¥å¼•å…¥ä½¿ç”¨
> `import xx from xxx`ï¼Œå¼•å…¥çš„å°±æ˜¯è¯¥å›¾ç‰‡ä»srcçš„è·¯å¾„ã€‚


> ä½†æ˜¯ä¸€æ—¦æˆ‘ä»¬åœ¨ä¸€ä¸ªå¾ˆæ·±çš„å±‚çº§ä¸­æƒ³è¦å¼•å…¥å¤–éƒ¨çš„èµ„æºæˆ–è€…ç»„ä»¶çš„æ—¶å€™ï¼Œæˆ‘ä»¬å°±è¦éå¸¸éº»çƒ¦çš„æ‰‹åŠ¨ç¿»åˆ°ä¸Šå±‚ç›®å½•ã€‚å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡viteçš„é…ç½®æ–‡ä»¶æ¥è¿›è¡Œè·¯å¾„åˆ«åçš„é…ç½®ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673663552383-2e815ab7-016c-412e-b8e1-ae50984397ec.png#averageHue=%232a2e36&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=257&id=ua60ea470&margin=%5Bobject%20Object%5D&name=image.png&originHeight=514&originWidth=1420&originalType=binary&ratio=1&rotation=0&showTitle=false&size=96194&status=done&style=none&taskId=u2efc9d5a-c145-4a80-80f4-b11a83de891&title=&width=710)
> æˆ‘ä»¬å°±å¯ä»¥å¾ˆæ–¹ä¾¿çš„ä½¿ç”¨åˆ«åç›´æ¥è®¿é—®è·¯å¾„

> å»ºè®®ï¼šæˆ‘ä»¬å¼•å…¥èµ„æºçš„æ—¶å€™ï¼Œæ¯”å¦‚å¼•å…¥lodashåº“ï¼Œå¯ä»¥ä½¿ç”¨åˆ†åˆ«å¼•å…¥ï¼Œä¸ä½¿ç”¨é»˜è®¤å¼•å…¥ï¼Œå³æˆ‘ä»¬ç”¨åˆ°å“ªäº›ä¸œè¥¿å°±å¼•å…¥å“ªäº›ä¸œè¥¿ï¼Œè¿™æ ·åšçš„å¥½å¤„å°±æ˜¯viteæ‹¥æœ‰tree shake : æ‰“åŒ…å·¥å…·ä¼šå¸®æˆ‘ä»¬ç§»é™¤æ‰é‚£äº›æˆ‘ä»¬æ²¡æœ‰ä½¿ç”¨åˆ°çš„å˜é‡æˆ–è€…æ–¹æ³•ã€‚å¦‚æœæˆ‘ä»¬ä½¿ç”¨é»˜è®¤å¼•å…¥ï¼Œå¼•å…¥çš„å°±æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œviteä¸å¯èƒ½å»ç§»é™¤æˆ‘ä»¬å¯¹è±¡ä¸­çš„ä¸œè¥¿ã€‚å»ºè®®ä½¿ç”¨ä»€ä¹ˆå°±å¼•å…¥ä»€ä¹ˆã€‚

å½“æˆ‘ä»¬é€šè¿‡importå¼•å…¥çš„æ–‡ä»¶æ˜¯jsonæ–‡ä»¶çš„æ—¶å€™ï¼Œviteè¿˜å¯ä»¥è‡ªåŠ¨çš„æŠŠjsonè½¬æ¢ä¸ºjså¯¹è±¡ï¼Œè€Œä¸”æˆ‘ä»¬è¿˜å¯ä»¥ç›´æ¥é€šè¿‡åˆ†åˆ«å¯¼å…¥çš„æ–¹å¼å¼•å…¥jsonä¸­æˆ‘ä»¬éœ€è¦çš„å±æ€§ã€‚
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673664374599-b228b5d5-7a03-43a2-b035-37f0ba940a28.png#averageHue=%232d3139&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=230&id=ub244c907&margin=%5Bobject%20Object%5D&name=image.png&originHeight=460&originWidth=2064&originalType=binary&ratio=1&rotation=0&showTitle=false&size=176961&status=done&style=none&taskId=u4050c970-8575-4994-84c9-b860713e362&title=&width=1032)


# resolve.aliasåŸç†
é¦–å…ˆåˆ«åçš„é…ç½®ï¼š
```javascript
const path = require('path');
module.exports = {
  resolve: {
    alias: {
      // ä½¿ç”¨pathçš„åŸå› å°±æ˜¯é˜²æ­¢å¯åŠ¨æœåŠ¡çš„ä½ç½®ä¸æ˜¯åœ¨æœ¬ç›®å½•å‡ºç°æ–‡ä»¶æ‰¾ä¸åˆ°
      "@": path.resolve(__dirname, "./src")
    }
  }
}
```
é…ç½®è¯·æ±‚çš„å¤„ç†ï¼š
```javascript
const Koa = require('koa');//nodeåªæ”¯æŒCommonJS,æ‰€ä»¥æˆ‘ä»¬åªå¯ä»¥ä½¿ç”¨require
const fs = require('fs');//fsæ˜¯nodeå†…ç½®çš„æ¨¡å—
const path = require('path');
const viteConfig = require('./vite.config')
const aliasResolve = require('./aliasResolve.js');

const app = new Koa();

app.use(async (ctx) => {
  if (ctx.request.url === '/') {
    const indexContent =
      await fs.promises.readFile(path.resolve(__dirname, "./index.html"))
    ctx.response.set("Content-Type", "text/html")
    ctx.response.body = indexContent
  }
  if (ctx.request.url.endsWith('.js')) {
    // è¯»å–è¯·æ±‚çš„æ–‡ä»¶
    const mainContent =
      await fs.promises.readFile(path.resolve(__dirname, "." + ctx.request.url))
    // console.log(mainContent.toString())
    // æŠŠæ–‡ä»¶ä¸­çš„è·¯å¾„åˆ«åæ›¿æ¢ä¸ºçœŸå®çš„è·¯å¾„
    const lastResult = aliasResolve(viteConfig.resolve.alias, mainContent.toString())
    ctx.response.body = lastResult
    ctx.response.set("Content-Type", "text/javascript")
  }
})
// å¼€å¯ä¸€ä¸ªæœåŠ¡,ç«¯å£å·ä¸º5173
app.listen(5173, () => {
  console.log('vite dev server listen on 5173')
})
```
æŠŠåˆ«åè¿›è¡Œå­—ç¬¦ä¸²æ›¿æ¢å¹¶è¿”å›æ›¿æ¢åçš„å†…å®¹ï¼š
```javascript
module.exports = function (aliasConf, content) {
  // es6çš„å†™æ³•,æŠŠå¯¹è±¡çš„keyå’Œvalueä¿å­˜åˆ°ä¸€ä¸ªæ•°ç»„ä¸­
  const entires = Object.entries(aliasConf)
  // console.log("entires", entires)
  /* entires[
        ['@', '/Users/humeng/Github/mycode/13.vite/04.vite-dev-server/src']
    ] */
  let lastContent = content
  entires.forEach(entire => {
    const [alias, path] = entire
    const srcIndex = path.indexOf('/src')
    const replacePath = path.slice(srcIndex, path.length)
    // console.log(alias, path, srcIndex, replacePath)
    // æ›¿æ¢@ä¸º/src
    lastContent = content.replace(alias, replacePath)
  })

  // console.log(lastContent)

  return lastContent

}
```
# viteå¯¹svgèµ„æºçš„å¤„ç†
> viteå¯¹SVGèµ„æºä¾æ—§æ˜¯å¼€ç®±å³ç”¨çš„

SVGæ˜¯ï¼šscalable vector graphics å¯ä¼¸ç¼©çŸ¢é‡å›¾å½¢

1. SVGæ˜¯ä¸ä¼šå¤±çœŸçš„
2. å°ºå¯¸å°

æˆ‘ä»¬ä½¿ç”¨svgæ›´å¤šçš„æ˜¯åšå›¾æ ‡
```javascript
import bili_url from '@assets/svgs/bili.svg?url'
// å¼•å…¥çš„æ—¶å€™åé¢å¯ä»¥æ ¹å‚æ•°
import bili_raw from '@assets/svgs/bili.svg?raw'
console.log(bili_url, bili_raw)

// ç¬¬ä¸€ç§ä½¿ç”¨svgçš„æ–¹å¼:ä»¥å›¾ç‰‡çš„å½¢å¼åŠ è½½,ç¼ºç‚¹ä¸èƒ½ä¿®æ”¹å›¾ç‰‡é¢œè‰²
/* const img = document.createElement('img')
img.src = bili

document.body.appendChild(img) */

// ç¬¬äºŒç§ä½¿ç”¨svgçš„æ–¹å¼
const div = document.createElement("div")
div.innerHTML = bili_raw
document.body.appendChild(div)
const svg = document.getElementsByTagName('svg')[0]
svg.onmouseenter = function () {
  this.style.color = "#6cf"
}
svg.onmouseleave = function () {
  this.style.color = "#000"
}


```
> å¼•å…¥èµ„æºçš„åé¢å¯ä»¥åŠ ä¸Šå‚æ•°
> `?url`å¼•å…¥çš„æ˜¯urlè·¯å¾„ï¼›
> `?raw`å¼•å…¥çš„æ˜¯åŸæ–‡ä»¶

# viteé™æ€èµ„æºç”Ÿäº§ç¯å¢ƒçš„é…ç½®
åœ¨vite.config.jsä¸­å¯ä»¥æ·»åŠ å¦‚ä¸‹é…ç½®ï¼Œå¯¹é™æ€èµ„æºæ‰“åŒ…åè¿›è¡Œé…ç½®
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673673379222-cde8d33b-4592-41a8-99d2-e064e03ab298.png#averageHue=%232b2f37&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=446&id=u85dcea00&margin=%5Bobject%20Object%5D&name=image.png&originHeight=892&originWidth=1780&originalType=binary&ratio=1&rotation=0&showTitle=false&size=221369&status=done&style=none&taskId=u4eeb205b-ce46-44fe-a14d-af0ebe3131d&title=&width=890)
# Viteæ’ä»¶
æ’ä»¶æ˜¯ä»€ä¹ˆï¼Ÿ
> viteä¼šåœ¨ç”Ÿå‘½å‘¨æœŸçš„ä¸åŒé˜¶æ®µä¸­å»è°ƒç”¨ä¸åŒçš„æ’ä»¶ä»¥è¾¾åˆ°ä¸åŒçš„ç›®çš„

[https://cn.vitejs.dev/plugins/](https://cn.vitejs.dev/plugins/)
ç›®å‰viteæ”¯æŒçš„æ’ä»¶åˆ—è¡¨ï¼š
[https://github.com/vitejs/awesome-vite#plugins](https://github.com/vitejs/awesome-vite#plugins)
> ç›´æ¥åœ¨æ’ä»¶åˆ—è¡¨ä¸­ç‚¹å‡»éœ€è¦çš„æ’ä»¶ï¼Œå°±å¯ä»¥çœ‹åˆ°å¯¹åº”çš„ä»“åº“å’Œä½¿ç”¨è¯´æ˜

## vite-aliases
### ä½¿ç”¨
[https://github.com/subwaytime/vite-aliases](https://github.com/subwaytime/vite-aliases)
> è¯¥æ’ä»¶å¯ä»¥å¸®åŠ©æˆ‘ä»¬è‡ªåŠ¨ç”Ÿæˆè·¯å¾„çš„åˆ«åï¼šæ£€æµ‹srcä¸‹çš„æ‰€æœ‰æ–‡ä»¶å¤¹(åŒ…æ‹¬src)å¹¶å¸®åŠ©æˆ‘ä»¬ç”Ÿæˆåˆ«å

å®‰è£…è¯¥æ’ä»¶ï¼š
`yarn add -D vite-aliases`
ç„¶åæˆ‘ä»¬è‡ªå·±é…ç½®çš„resolve.aliaså°±å¯ä»¥åˆ æ‰äº†ï¼Œæˆ‘ä»¬ä½¿ç”¨è¿™ä¸ªæ’ä»¶è‡ªåŠ¨ç”Ÿæˆ
å¼•å…¥æ’ä»¶
```javascript
// å¼•å…¥åˆ«åè‡ªåŠ¨é…ç½®
import { ViteAliases } from 'vite-aliases'
```
é…ç½®æ’ä»¶
```javascript
// é…ç½®æ’ä»¶
plugins: [
  // è‡ªåŠ¨ç”Ÿæˆè·¯å¾„åˆ«åçš„æ’ä»¶
  ViteAliases()
],
```
> 2023-01-14ï¼šæˆ‘å‘ç°é¡¹ç›®å¯åŠ¨ä¸èµ·æ¥ï¼Œä¼šæŠ¥é”™ï¼Œå…·ä½“åŸå› githubçš„issues
> [https://github.com/Subwaytime/vite-aliases/issues/51#issuecomment-1382673399](https://github.com/Subwaytime/vite-aliases/issues/51#issuecomment-1382673399)
> å¯ä»¥æŠŠè¯¥æ’ä»¶çš„ç‰ˆæœ¬é™ä½ä¸º0.9.2å³å¯

### æ‰‹å†™vite-aliasesæ’ä»¶


## vite-plugin-html
> è¯¥æ’ä»¶ç”¨äºé…ç½®æ‰“åŒ…åçš„htmlçš„å†…å®¹
> å®‰è£…ï¼š`yarn add vite-plugin-html -D`
> å¼•å…¥ï¼š`import { createHtmlPlugin } from 'vite-plugin-html'`
> ä½¿ç”¨ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673680978474-8a45c23c-50f9-4244-b195-292e945be894.png#averageHue=%232a2f37&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=284&id=ud8b448a9&margin=%5Bobject%20Object%5D&name=image.png&originHeight=568&originWidth=734&originalType=binary&ratio=1&rotation=0&showTitle=false&size=59227&status=done&style=none&taskId=u57d1db8c-1793-4082-b4d6-0df527ecb6f&title=&width=367)


## vite-plugin-mock
> mockæ•°æ®--æ¨¡æ‹Ÿæ•°æ®
> mockï¼š[https://github.com/nuysoft/Mock/wiki](https://github.com/nuysoft/Mock/wiki)
> vite-plugin-mockï¼š[https://github.com/vbenjs/vite-plugin-mock/blob/HEAD/README.zh_CN.md](https://github.com/vbenjs/vite-plugin-mock/blob/HEAD/README.zh_CN.md)
> 1. é¦–å…ˆå®‰è£…ä¸¤ä¸ªæ’ä»¶ï¼š
>    1. `yarn add vite-plugin-mock mockjs -D`
> 2. é…ç½®viteé…ç½®æ–‡ä»¶ï¼Œä½¿ç”¨æ’ä»¶ï¼š
>    1. å¼•å…¥`import { viteMockServe } from 'vite-plugin-mock'`
>    2. ä½¿ç”¨æ’ä»¶ï¼Œå…·ä½“é…ç½®æŸ¥çœ‹ä¸Šæ–¹ç½‘ç«™
> 3. æ¨¡æ‹Ÿæ•°æ®ï¼š
> 
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673684037090-40897575-2414-40e5-87bf-8331a51df449.png#averageHue=%23292d35&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=716&id=ub304d213&margin=%5Bobject%20Object%5D&name=image.png&originHeight=1432&originWidth=1066&originalType=binary&ratio=1&rotation=0&showTitle=false&size=194693&status=done&style=none&taskId=uf954439d-27b1-4a44-b32f-fb6a0b2d5cf&title=&width=533)
> æ•°æ®ç”Ÿæˆè§„åˆ™æŸ¥çœ‹ä¸Šæ–¹ç½‘ç«™
> 4. è¯·æ±‚æ•°æ®![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673684113401-8d8e04cd-ed2b-4e76-8281-1e879c7b4ef4.png#averageHue=%23292e36&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=203&id=uf47174f7&margin=%5Bobject%20Object%5D&name=image.png&originHeight=406&originWidth=1378&originalType=binary&ratio=1&rotation=0&showTitle=false&size=72313&status=done&style=none&taskId=ud5a7c437-c30e-4c22-95cd-f53aeb60fb5&title=&width=689)


# viteå’Œtsçš„ç»“åˆ
> viteå¯¹äºtsæ”¯æŒæ˜¯éå¸¸å¥½çš„ï¼Œå¼€ç®±å³ç”¨ã€‚

ä½†æ˜¯æˆ‘ä»¬å†™tsçš„æ—¶å€™ï¼Œå¦‚æœæœ‰æŸä¸ªåœ°æ–¹ä¸ç¬¦åˆtsä½†æ˜¯ç¬¦åˆjsçš„è§„èŒƒï¼Œtsæ–‡ä»¶å†…ä¼šå‡ºç°è¯­æ³•è­¦å‘Šï¼Œä½†æ˜¯é¡¹ç›®å’Œé¡µé¢éƒ½æ˜¯æ­£å¸¸çš„ï¼Œæ²¡æœ‰æç¤ºã€‚æˆ‘ä»¬åº”è¯¥æ€ä¹ˆæŠŠé”™è¯¯ç›´æ¥è¾“å‡ºåˆ°æ§åˆ¶å°å‘¢ï¼Ÿ
> å¯ä»¥ä½¿ç”¨vite-plugin-checkeræ’ä»¶

## vite-plugin-checker

1. å®‰è£…`yarn add vite-plugin-checker -D`
2. ç¼–å†™viteé…ç½®æ–‡ä»¶ä½¿ç”¨æ’ä»¶ï¼š

![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673685996266-9f7211f9-fdbd-45c4-b9e5-28c15695a4ab.png#averageHue=%23292d36&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=284&id=u974c366d&margin=%5Bobject%20Object%5D&name=image.png&originHeight=568&originWidth=1122&originalType=binary&ratio=1&rotation=0&showTitle=false&size=80486&status=done&style=none&taskId=ufd73f68c-2257-4b05-9561-6d1a10d093b&title=&width=561)

3. ç”±äºæ’ä»¶ä¾èµ–typescriptï¼Œæ‰€ä»¥æˆ‘ä»¬è¿˜éœ€è¦å®‰è£…typescriptã€‚
4. æˆ‘ä»¬æ‰§è¡Œ`tsc --init`åˆå§‹åŒ–tsé…ç½®æ–‡ä»¶ã€‚
5. å¯åŠ¨é¡¹ç›®å³å¯ã€‚
6. æˆ‘ä»¬è¿˜å¯ä»¥åœ¨package.jsonæ–‡ä»¶ä¸­é…ç½®scriptsçš„buildå‘½ä»¤

`"build": "tsc --noEmit && vite build"`ï¼›æ„æ€æ˜¯æ‰§è¡Œyarn buildçš„æ—¶å€™å…ˆæ‰§è¡Œ
`tsc --noEmit`å¦‚æœè¿™ä¸ªå‘½ä»¤æ‰§è¡Œä¸æˆåŠŸåˆ™ä¸‹é¢çš„å‘½ä»¤ä¼šä¸­æ–­ã€‚
æ§åˆ¶å°ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673686165998-0c129ca0-064e-4d64-9d20-d6f439cf2439.png#averageHue=%232a313b&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=312&id=ue631581e&margin=%5Bobject%20Object%5D&name=image.png&originHeight=624&originWidth=1172&originalType=binary&ratio=1&rotation=0&showTitle=false&size=98304&status=done&style=none&taskId=u03431d54-abe8-463f-b5a7-3e553139b65&title=&width=586)
é¡µé¢ï¼š
![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673686197133-aeb86a58-23ea-4e19-9515-2687791dd659.png#averageHue=%232a323b&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=493&id=u1482b015&margin=%5Bobject%20Object%5D&name=image.png&originHeight=986&originWidth=1876&originalType=binary&ratio=1&rotation=0&showTitle=false&size=191923&status=done&style=none&taskId=ua0b44850-1f6f-4ad3-8e8c-d53bc7703bb&title=&width=938)
> æ³¨æ„ï¼šå¦‚æœæŠ¥äº†éå¸¸å¤šçš„é”™è¯¯ï¼Œæœ‰å…³ä»¥node_moduleä¸‹é¢çš„ï¼Œé‚£ä¹ˆæˆ‘ä»¬å°±éœ€è¦æ£€æŸ¥åˆšåˆšä½¿ç”¨`tsc --init`ç”Ÿæˆçš„`tsconfig.json`æ–‡ä»¶ä¸­æ˜¯å¦é…ç½®äº†`"skipLibCheck": true`

## viteä¸tsç»“åˆå¦‚ä½•ä½¿ç”¨import.meta.env.xxç¯å¢ƒå˜é‡
> æˆ‘ä»¬åœ¨tsæ–‡ä»¶ä¸­ä½¿ç”¨import.meta.env.xxç¯å¢ƒå˜é‡ï¼Œå¦‚æœæ²¡æœ‰é…ç½®ï¼Œä¼šå‡ºç°ä¸‹é¢çš„æŠ¥é”™ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673692482653-c5cbd370-b625-4099-a8ba-70cc274e7708.png#averageHue=%232b313a&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=381&id=uf7d39f01&margin=%5Bobject%20Object%5D&name=image.png&originHeight=762&originWidth=1396&originalType=binary&ratio=1&rotation=0&showTitle=false&size=273426&status=done&style=none&taskId=u53f91d99-744f-424f-bf58-d3fe7ee374d&title=&width=698)

è¿™ä¸ªæ—¶å€™æˆ‘ä»¬éœ€è¦è¿›è¡Œä¸€äº›é…ç½®ï¼Œè®©tsçŸ¥é“æˆ‘ä»¬æœ‰è¿™ä¸ªå±æ€§
[https://cn.vitejs.dev/guide/env-and-mode.html#env-files](https://cn.vitejs.dev/guide/env-and-mode.html#env-files)
> é»˜è®¤æƒ…å†µä¸‹ï¼ŒVite åœ¨ [vite/client.d.ts](https://github.com/vitejs/vite/blob/main/packages/vite/client.d.ts) ä¸­ä¸º import.meta.env æä¾›äº†ç±»å‹å®šä¹‰ã€‚éšç€åœ¨ .env[mode] æ–‡ä»¶ä¸­è‡ªå®šä¹‰äº†è¶Šæ¥è¶Šå¤šçš„ç¯å¢ƒå˜é‡ï¼Œä½ å¯èƒ½æƒ³è¦åœ¨ä»£ç ä¸­è·å–è¿™äº›ä»¥ VITE_ ä¸ºå‰ç¼€çš„ç”¨æˆ·è‡ªå®šä¹‰ç¯å¢ƒå˜é‡çš„ TypeScript æ™ºèƒ½æç¤ºã€‚
> è¦æƒ³åšåˆ°è¿™ä¸€ç‚¹ï¼Œä½ å¯ä»¥åœ¨ src ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª **env.d.ts **æ–‡ä»¶ï¼Œæ¥ç€æŒ‰ä¸‹é¢è¿™æ ·å¢åŠ  ImportMetaEnv çš„å®šä¹‰ï¼š
> ![image.png](https://cdn.nlark.com/yuque/0/2023/png/26314652/1673692608390-5ae68936-3244-45a9-b33f-993eb192a90f.png#averageHue=%23282c34&clientId=ue689302d-4825-4&crop=0&crop=0&crop=1&crop=1&from=paste&height=311&id=u0793f249&margin=%5Bobject%20Object%5D&name=image.png&originHeight=622&originWidth=970&originalType=binary&ratio=1&rotation=0&showTitle=false&size=84347&status=done&style=none&taskId=u97d238d7-4006-4cf4-9ff6-9c03950b4be&title=&width=485)
> å¦‚æœä½ çš„ä»£ç ä¾èµ–äºæµè§ˆå™¨ç¯å¢ƒçš„ç±»å‹ï¼Œæ¯”å¦‚ [DOM](https://github.com/microsoft/TypeScript/blob/main/lib/lib.dom.d.ts) å’Œ [WebWorker](https://github.com/microsoft/TypeScript/blob/main/lib/lib.webworker.d.ts)ï¼Œä½ å¯ä»¥åœ¨ tsconfig.json ä¸­ä¿®æ”¹ [lib](https://www.typescriptlang.org/tsconfig#lib) å­—æ®µæ¥è·å–ç±»å‹æ”¯æŒã€‚

```json
{
  "lib": ["WebWorker"]
}
```


# Viteè·¨åŸŸé…ç½®
> [https://cn.vitejs.dev/config/server-options.html#server-proxy](https://cn.vitejs.dev/config/server-options.html#server-proxy)

ä¸ºå¼€å‘æœåŠ¡å™¨é…ç½®è‡ªå®šä¹‰ä»£ç†è§„åˆ™ã€‚æœŸæœ›æ¥æ”¶ä¸€ä¸ª { key: options } å¯¹è±¡ã€‚ä»»ä½•è¯·æ±‚è·¯å¾„ä»¥ key å€¼å¼€å¤´çš„è¯·æ±‚å°†è¢«ä»£ç†åˆ°å¯¹åº”çš„ç›®æ ‡ã€‚å¦‚æœ key å€¼ä»¥ ^ å¼€å¤´ï¼Œå°†è¢«è¯†åˆ«ä¸º RegExpã€‚configure é€‰é¡¹å¯ç”¨äºè®¿é—® proxy å®ä¾‹ã€‚
è¯·æ³¨æ„ï¼Œå¦‚æœä½¿ç”¨äº†éç›¸å¯¹çš„ [åŸºç¡€è·¯å¾„base](https://cn.vitejs.dev/config/shared-options.html#base)ï¼Œåˆ™å¿…é¡»åœ¨æ¯ä¸ª key å€¼å‰åŠ ä¸Šè¯¥ baseã€‚
ä½¿ç”¨ [http-proxy](https://github.com/http-party/node-http-proxy)ã€‚å®Œæ•´é€‰é¡¹è¯¦è§ [æ­¤å¤„](https://github.com/http-party/node-http-proxy#options).
åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œä½ å¯èƒ½ä¹Ÿæƒ³è¦é…ç½®åº•å±‚çš„å¼€å‘æœåŠ¡å™¨ã€‚ï¼ˆä¾‹å¦‚æ·»åŠ è‡ªå®šä¹‰çš„ä¸­é—´ä»¶åˆ°å†…éƒ¨çš„ [connect](https://github.com/senchalabs/connect) åº”ç”¨ä¸­ï¼‰ä¸ºäº†å®ç°è¿™ä¸€ç‚¹ï¼Œä½ éœ€è¦ç¼–å†™ä½ è‡ªå·±çš„ [æ’ä»¶](https://cn.vitejs.dev/guide/using-plugins.html) å¹¶ä½¿ç”¨ [configureServer](https://cn.vitejs.dev/guide/api-plugin.html#configureserver) å‡½æ•°ã€‚
**ç¤ºä¾‹ï¼š**
```javascript
export default defineConfig({
  server: {
    proxy: {
      // å­—ç¬¦ä¸²ç®€å†™å†™æ³•ï¼šhttp://localhost:5173/foo -> http://localhost:4567/foo
      '/foo': 'http://localhost:4567',
      // å¸¦é€‰é¡¹å†™æ³•ï¼šhttp://localhost:5173/api/bar -> http://jsonplaceholder.typicode.com/bar
      '/api': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        // æŠŠ /api æ›¿æ¢ä¸º ç©ºå­—ç¬¦ä¸²
        rewrite: (path) => path.replace(/^\/api/, ''),
      },
      // æ­£åˆ™è¡¨è¾¾å¼å†™æ³•ï¼šhttp://localhost:5173/fallback/ -> http://jsonplaceholder.typicode.com/
      '^/fallback/.*': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        rewrite: (path) => path.replace(/^\/fallback/, ''),
      },
      // ä½¿ç”¨ proxy å®ä¾‹
      '/api': {
        target: 'http://jsonplaceholder.typicode.com',
        changeOrigin: true,
        configure: (proxy, options) => {
          // proxy æ˜¯ 'http-proxy' çš„å®ä¾‹
        }
      },
      // ä»£ç† websockets æˆ– socket.io å†™æ³•ï¼šws://localhost:5173/socket.io -> ws://localhost:5174/socket.io
      '/socket.io': {
        target: 'ws://localhost:5174',
        ws: true,
      },
    },
  },
})

```
# è¡¥å……
## ä¸ºä»€ä¹ˆä½¿ç”¨vue3åœ¨å¯¼å…¥ç»„ä»¶çš„æ—¶å€™å¿…é¡»å¸¦ä¸Š.vueåç¼€äº†ï¼Ÿ
> å› ä¸ºåœ¨viteçš„é…ç½®ä¸­ï¼Œresolve.extensionsé»˜è®¤æ˜¯['.mjs', '.js', '.ts', '.jsx', '.tsx', '.json']å·²ç»æ²¡æœ‰é»˜è®¤.vueåç¼€äº†ï¼Œè‡³äºä¸ºä»€ä¹ˆæ˜¯å› ä¸ºå®ƒä¼šå½±å“IDEå’Œç±»å‹æ”¯æŒã€‚

[https://cn.vitejs.dev/config/shared-options.html#resolve-extensions](https://cn.vitejs.dev/config/shared-options.html#resolve-extensions)

# é…ç½®æ–‡ä»¶å‚è€ƒ
```javascript
// importæœ€åéƒ½ä¼šè¢«æ›¿æ¢ä¸ºcommonJSè§„èŒƒçš„
import { defineConfig } from 'vite'
/* æ’ä»¶ */
// å¼•å…¥åˆ«åè‡ªåŠ¨é…ç½®
import { ViteAliases } from 'vite-aliases'
// å¼•å…¥åˆ›å»ºhtmlæ’ä»¶
import { createHtmlPlugin } from 'vite-plugin-html'
// å¼•å…¥vite-plugin-mockæ’ä»¶
import { viteMockServe } from 'vite-plugin-mock'
// å¼•å…¥postcssé¢„å¤„ç†ç¯å¢ƒ
const postcssPresetEnv = require('postcss-preset-env');
const path = require('path');
// åŸºç¡€é…ç½®
export default defineConfig({
    // å€ŸåŠ©æ’ä»¶è‡ªåŠ¨ç”Ÿæˆ
    /* resolve: {
        // é…ç½®è·¯å¾„åˆ«å,æ–¹ä¾¿æ·±å±‚æ¬¡çš„æ–‡ä»¶å¼•ç”¨å¤–éƒ¨çš„èµ„æº
        alias: {
            "@": path.resolve(__dirname, "./src"),
            "@assets": path.resolve(__dirname, "./src/assets")
        }
    }, */
    // ä¾èµ–é¢„æ„å»º
    optimizeDeps: {
        exclude: []
    },
    // ç¯å¢ƒå˜é‡å‰ç¼€
    envPrefix: "ENV_",
    // ç¯å¢ƒå˜é‡æ–‡ä»¶è·¯å¾„,ä¸€èˆ¬ä¸é…ç½®æ–‡ä»¶å¹³çº§
    envDir: "./",
    // å¯¹cssçš„è¡Œä¸ºè¿›è¡Œé…ç½®
    css: {
        // æ˜¯å¯¹cssæ¨¡å—åŒ–çš„é»˜è®¤è¡Œä¸ºè¿›è¡Œè¦†ç›–
        modules: {
            // ä¿®æ”¹ç”Ÿæˆçš„é…ç½®å¯¹è±¡çš„keyçš„å½¢å¼
            localsConvention: "dashesOnly",
            scopeBehaviour: "local",
            // generateScopedName: "[name]_[local]_[hash:5]"
            // hashPrefix: "hello"
            // globalModulePaths: [],//ä»£è¡¨ä¸æƒ³å‚ä¸cssæ¨¡å—åŒ–çš„è·¯å¾„
        },
        // æ‰§è¡Œç¼–è¯‘cssæ–‡ä»¶çš„æ‰§è¡Œå‚æ•°
        preprocessorOptions: {//key+value
            less: { // æ•´ä¸ªçš„é…ç½®å¯¹è±¡éƒ½ä¼šç»™åˆ°lessçš„æ‰§è¡Œå‚æ•°(å…¨å±€å‚æ•°)ä¸­å»
                math: "always",
                // é…ç½®å…¨å±€å˜é‡
                globalVars: {
                    "main-color": "red",
                    "color-content": "pink"
                }
            },
        },
        devSourcemap: true,//å¼€å¯cssçš„sourcemap
        // viteçš„è¯ç”Ÿä¼šè®©postcsså†ç«ä¸€æ¬¡
        postcss: {
            plugins: [postcssPresetEnv({
                // è®©postcssèƒ½å¤Ÿä¿ç•™ä¸€äº›å…¨å±€å˜é‡,å¯ä»¥æä¾›åé¢çš„æ–‡ä»¶ä½¿ç”¨
                importFrom: path.resolve(__dirname, "./variable.css"),
            })]
        }
    },
    // æ„å»ºç”Ÿäº§åŒ…çš„æ—¶å€™çš„ä¸€äº›ç­–ç•¥
    build: {
        // é…ç½®rollupçš„ä¸€äº›æ„å»ºç­–ç•¥
        rollupOptions: {
            output: {// æ§åˆ¶è¾“å‡º
                // åœ¨rollupé‡Œé¢, hashä»£è¡¨çš„æ˜¯ä½ çš„æ–‡ä»¶åå’Œæ–‡ä»¶å†…å®¹è¿›è¡Œç»„åˆè®¡ç®—å¾—æ¥çš„ç»“æœ
                assetFileNames: "[hash].[name].[ext]",
            },

        },
        // assetsInlineLimit: 4096, // 4kb å¦‚æœé™æ€èµ„æºå°äº4kbåˆ™ä¼šè½¬æ¢ä¸ºbase64çš„æ ¼å¼
        // outDir: "build",//é…ç½®æ‰“åŒ…çš„æ–‡ä»¶åç§°
        assetsDir: "static",// é…ç½®æ‰“åŒ…åé™æ€èµ„æºçš„ç›®å½•
    },
    // é…ç½®æ’ä»¶
    plugins: [
        // è‡ªåŠ¨ç”Ÿæˆè·¯å¾„åˆ«åçš„æ’ä»¶
        ViteAliases(),
        // é…ç½®ç”Ÿæˆçš„htmlæ–‡ä»¶
        createHtmlPlugin({
            inject: {
                data: {
                    title: "é¦–é¡µ"
                },
            },
        }),
        // å¼€ç®±å³ç”¨,è‡ªåŠ¨å¯»æ‰¾æ ¹ç›®å½•çš„mockæ–‡ä»¶å¤¹
        viteMockServe({
            // é…ç½®mockçš„æ–‡ä»¶å¤¹ä½ç½®
            mockPath: "/src/mock"
        })
    ],
}
)


```
